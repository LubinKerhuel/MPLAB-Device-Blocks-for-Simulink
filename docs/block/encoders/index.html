<!doctype html><html lang=en><head><title>Encoder Blocks - MPLAB Device Blocks for Simulink</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="MPLAB Device Blocks for Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers"><meta name=keywords content="Microchip,MPLAB,MATLAB,Simulink,dsPIC,PIC32,Embedded,Code Generation,Motor Control"><meta name=author content="Microchip Technology Inc."><meta name=robots content="index, follow"><meta http-equiv=X-UA-Compatible content="IE=edge"><link rel=canonical href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/index.html><link rel=icon type=image/x-icon href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/favicon.ico><style>html,html[data-theme=dark],body{color-scheme:light only!important;background-color:#fff!important;color:#222!important}:root{--bg-primary:#f8f9fa;--bg-secondary:white;--bg-tertiary:#f8f9fa;--text-primary:#2c3e50;--text-secondary:#666;--text-tertiary:#6c757d;--text-heading:#1a1a1a;--border-color:#dee2e6;--border-light:#e1e8ed;--border-medium:#e9ecef;--accent-primary:#1C355E;--accent-secondary:#41B6E6;--accent-hover:#2a5a8f;--accent-light:#D1DDE6;--code-bg:#f4f4f4;--code-text:#c7254e;--pre-bg:linear-gradient(to bottom, #e8e8e8 0%, #f0f0f0 100%);--pre-border:#d0d0d0;--table-hover:#E5F3FF;--table-stripe:#f8f9fa;--note-bg:linear-gradient(to right, #e7f3fe 0%, #f5fbff 100%);--note-border:#2196F3;--note-text:#1976D2;--warning-bg:linear-gradient(to right, #fff9e6 0%, #fffcf0 100%);--warning-border:#ff9800;--warning-text:#f57c00;--shadow-sm:0 2px 4px rgba(0,0,0,0.05);--shadow-md:0 2px 8px rgba(0,0,0,0.08);--shadow-lg:0 2px 12px rgba(0,0,0,0.08)}[data-theme=dark]{--bg-primary:#1a1d23;--bg-secondary:#242831;--bg-tertiary:#2d3139;--text-primary:#e4e6eb;--text-secondary:#adb5bd;--text-tertiary:#8b95a1;--text-heading:#e4e6eb;--border-color:#3a3f4b;--border-light:#3a3f4b;--border-medium:#404654;--accent-primary:#41B6E6;--accent-secondary:#5AC8FA;--accent-hover:#6DD5FF;--accent-light:#1a2d3f;--code-bg:#2d3139;--code-text:#ff6b9d;--pre-bg:linear-gradient(to bottom, #2d3139 0%, #2d3139 100%);--pre-border:#3a3f4b;--table-hover:#1e3a52;--table-stripe:#2d3139;--note-bg:linear-gradient(to right, #1e3a52 0%, #1e3a52 100%);--note-border:#4da6d6;--note-text:#66b3e0;--warning-bg:linear-gradient(to right, #3d3520 0%, #3d3520 100%);--warning-border:#ffb347;--warning-text:#ffc870;--shadow-sm:0 2px 4px rgba(0,0,0,0.3);--shadow-md:0 2px 8px rgba(0,0,0,0.4);--shadow-lg:0 2px 12px rgba(0,0,0,0.5)}:root{--content-max-width:1000px;--content-margin-horizontal:30px;--content-margin-vertical:15px;--container-border-radius:8px}*{transition:background-color .3s ease,color .3s ease,border-color .3s ease}body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,roboto,oxygen,ubuntu,cantarell,sans-serif;margin:0;padding:0;line-height:1.6;color:var(--text-primary);background-color:var(--bg-primary);font-size:15px}.doc-wrapper{display:flex;max-width:1600px;margin:0 auto;min-height:100vh}.sidebar{width:280px;background-color:var(--bg-secondary);border-right:1px solid var(--border-color);position:sticky;top:0;height:100vh;overflow-y:auto;overflow-x:hidden;flex-shrink:0}.sidebar::-webkit-scrollbar{width:8px}.sidebar::-webkit-scrollbar-track{background:var(--bg-tertiary)}.sidebar::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}.sidebar::-webkit-scrollbar-thumb:hover{background:var(--accent-primary)}.content-wrapper{flex:1;min-width:0;background-color:var(--bg-primary)}.container{max-width:var(--content-max-width);margin:var(--content-margin-vertical)var(--content-margin-horizontal);background-color:var(--bg-secondary);padding:30px;box-shadow:var(--shadow-lg);border-radius:var(--container-border-radius)}.sidebar-header{padding:20px;border-bottom:2px solid var(--border-light);background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%)}.sidebar-title{color:#fff;font-size:16px;font-weight:700;margin:0;text-align:center}.sidebar-nav{padding:15px 0}.nav-section{margin-bottom:8px}.nav-section-title{display:flex;align-items:center;justify-content:space-between;padding:10px 20px;color:var(--text-primary);font-weight:600;font-size:14px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease}.nav-section-title:hover{background-color:var(--bg-tertiary);border-left-color:var(--accent-primary);color:var(--accent-primary)}.nav-section-title .icon{font-size:16px;margin-right:8px}.nav-section-title .toggle-icon{font-size:12px;transition:transform .2s ease}.nav-section.expanded .toggle-icon{transform:rotate(90deg)}.nav-section-children{display:none;padding-left:15px}.nav-section.expanded>.nav-section-children{display:block}.nav-link{display:block;padding:8px 20px;padding-left:45px;color:var(--text-secondary);font-size:13px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-link:hover{background-color:var(--bg-tertiary);color:var(--accent-primary);border-left-color:var(--accent-light)}.nav-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.nav-subsection{margin-bottom:4px}.nav-subsection-title{display:flex;align-items:center;justify-content:space-between;padding:8px 20px;padding-left:35px;color:var(--text-primary);font-weight:600;font-size:13px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease;background-color:var(--bg-tertiary)}.nav-subsection-title:hover{background-color:var(--bg-primary);border-left-color:var(--accent-secondary);color:var(--accent-secondary)}.nav-subsection-title .icon{font-size:14px;margin-right:6px}.nav-subsection-title .toggle-icon{font-size:10px;transition:transform .2s ease}.nav-subsection.expanded .toggle-icon{transform:rotate(90deg)}.nav-subsection .nav-section-children{display:none;padding-left:10px}.nav-subsection.expanded>.nav-section-children{display:block}.nav-block-link{display:block;padding:6px 20px;padding-left:55px;color:var(--text-secondary);font-size:12px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-block-link:hover{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-secondary)}.nav-block-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.mobile-nav-toggle{display:none;position:fixed;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;background:var(--accent-primary);color:#fff;border:none;font-size:24px;cursor:pointer;box-shadow:var(--shadow-lg);z-index:1000}.mobile-nav-toggle:hover{background:var(--accent-hover)}.theme-toggle{display:inline-flex;align-items:center;gap:6px;cursor:pointer;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:20px;padding:6px 12px;font-size:13px;color:var(--text-secondary);margin-left:16px;user-select:none}.theme-toggle:hover{background:var(--accent-light);border-color:var(--accent-primary);color:var(--accent-primary)}.theme-icon{font-size:16px}.page-header{display:flex;justify-content:space-between;align-items:center;padding:16px 0 12px;margin-bottom:20px;border-bottom:3px solid var(--border-light);position:relative}.page-header::after{content:'';position:absolute;bottom:-3px;left:0;width:120px;height:3px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}.page-header h1{margin:0;color:var(--text-heading);font-size:32px;font-weight:700;letter-spacing:-.5px}.page-header-right{display:flex;align-items:center}.microchip-logo{height:40px;max-width:200px;object-fit:contain}.breadcrumbs{display:flex;align-items:center;font-size:13px;color:var(--text-secondary);margin-bottom:16px;padding:10px 14px;background:var(--bg-tertiary);border-radius:6px;border-left:3px solid var(--accent-primary)}.breadcrumbs a{color:var(--accent-primary);text-decoration:none;padding:4px 8px;border-radius:3px}.breadcrumbs a:hover{background-color:var(--accent-light);color:var(--accent-hover)}.breadcrumbs span{margin:0 8px;color:var(--text-tertiary)}h2{color:var(--text-heading);font-weight:600;font-size:22px;letter-spacing:-.5px;margin-top:32px;margin-bottom:12px;padding-bottom:6px;border-bottom:2px solid var(--border-light);position:relative}h2::before{content:'';position:absolute;bottom:-2px;left:0;width:60px;height:2px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}h3{color:var(--text-primary);font-weight:600;font-size:17px;margin-top:24px;margin-bottom:10px}h4{color:var(--text-primary);font-weight:500;font-size:15px;margin-top:18px;margin-bottom:8px}p{margin-bottom:12px;line-height:1.6;color:var(--text-primary)}table{border-collapse:separate;border-spacing:0;width:100%;margin:18px 0;border:1px solid var(--border-color);border-radius:6px;overflow:hidden;box-shadow:var(--shadow-md)}th{background:linear-gradient(to bottom,var(--accent-primary) 0%,var(--accent-secondary) 100%);color:#fff;padding:14px 16px;text-align:left;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid var(--accent-secondary)}td{padding:12px 16px;border-bottom:1px solid var(--border-medium);vertical-align:top;color:var(--text-primary);background-color:var(--bg-secondary)}tr:last-child td{border-bottom:none}tr:nth-child(even) td{background-color:var(--table-stripe)}tbody tr:hover td{background-color:var(--table-hover)}code{background-color:var(--code-bg);padding:3px 6px;border-radius:3px;font-family:consolas,monaco,courier new,monospace;color:var(--code-text);font-size:14px}pre{background:var(--pre-bg);border:1px solid var(--pre-border);border-left:4px solid var(--accent-primary);border-radius:6px;padding:16px;margin:18px 0;box-shadow:var(--shadow-sm);overflow-x:auto;line-height:1.5}pre code{background-color:initial;padding:0;color:var(--text-primary);font-family:consolas,monaco,courier new,monospace;font-size:14px}.note{background:var(--note-bg);border-left:5px solid var(--note-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.note::before{content:'\2139\FE0F  Note';display:block;font-weight:600;color:var(--note-text);margin-bottom:6px;font-size:14px}.note p{color:var(--text-primary)}.warning{background:var(--warning-bg);border-left:5px solid var(--warning-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.warning::before{content:'\26A0\FE0F  Warning';display:block;font-weight:600;color:var(--warning-text);margin-bottom:6px;font-size:14px}.warning p{color:var(--text-primary)}ul,ol{margin:12px 0;padding-left:30px;line-height:1.6}li{margin:6px 0;color:var(--text-primary)}li mjx-container[display=true]{text-align:left!important;margin:8px 0!important}li p mjx-container[display=true]{text-align:left!important;margin:8px 0!important}a{color:var(--accent-primary);text-decoration:none}a:hover{color:var(--accent-hover);text-decoration:underline}.nav-footer{margin-top:48px;padding:20px 0 12px;border-top:2px solid var(--border-light);font-size:11px;color:var(--text-tertiary);text-align:center}.nav-footer p{margin:0;font-size:11px}.block-icon-container{display:flex;align-items:center;gap:15px;margin:20px auto;padding:15px;max-width:900px;background-color:#f8f9fa;border-radius:8px;border:1px solid #dee2e6;transition:all .2s ease-in-out}.block-card-link{display:flex;align-items:center;gap:15px;flex:1;text-decoration:none;color:inherit}.block-icon-container:has(.block-card-link):hover{background-color:#e9ecef;border-color:#0076a8;box-shadow:0 2px 8px rgba(0,118,168,.15);cursor:pointer}.block-icon-image{flex-shrink:0;width:150px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.block-icon-image picture{width:100%;max-width:150px;display:flex;align-items:center;justify-content:center}.block-icon-image img,.block-icon-image source{max-width:100%;max-height:100%;width:auto;height:auto;display:block;object-fit:contain}.block-icon-description{flex:1;font-size:16px;line-height:1.6;color:#333;column-count:1;max-width:100%}.family-tags{display:flex;flex-wrap:wrap;gap:6px;margin-top:12px;justify-content:center;width:100%}.family-tag{display:inline-block;padding:3px 8px;font-size:11px;font-weight:600;background-color:#2196f3;color:#fff;border-radius:4px;white-space:nowrap}.family-detail{font-weight:400;opacity:.9;font-size:10px;margin-left:3px}.chip-family-badges{display:flex;flex-direction:column;gap:6px;padding:12px;background-color:#e3f2fd;border:2px solid #2196f3;border-radius:6px;min-width:140px;flex-shrink:0}.chip-family-badges::before{content:"Device Support";font-size:11px;font-weight:700;color:#1565c0;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px;text-align:center}.chip-badge{display:block;padding:6px 10px;font-size:12px;font-weight:600;border-radius:4px;white-space:nowrap;text-align:center;transition:all .15s ease-in-out}.chip-badge:hover{transform:scale(1.05);box-shadow:0 2px 4px rgba(0,0,0,.2)}.chip-badge.dspic30f{background-color:#e3f2fd;color:#1565c0;border:1px solid #90caf9}.chip-badge.dspic33f{background-color:#e8f5e9;color:#2e7d32;border:1px solid #81c784}.chip-badge.dspic33e{background-color:#fff3e0;color:#e65100;border:1px solid #ffb74d}.chip-badge.dspic33c{background-color:#f3e5f5;color:#6a1b9a;border:1px solid #ba68c8}.chip-badge.dspic33a{background-color:#fce4ec;color:#c2185b;border:1px solid #f06292}.chip-badge.pic32{background-color:#e0f7fa;color:#00695c;border:1px solid #4db6ac}.chip-badge.sam{background-color:#fff9c4;color:#f57f17;border:1px solid #fdd835}.chip-badge.all-families{background-color:#e0e0e0;color:#424242;border:1px solid #9e9e9e;font-weight:700}p img,.container>img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-light);border-radius:4px;box-shadow:var(--shadow-sm)}@media(max-width:768px){body{padding:10px 20px}.container{padding:20px}.page-header{flex-direction:column;align-items:flex-start;gap:16px}.microchip-logo{height:40px}.page-header h1{font-size:24px}h2{font-size:20px}h3{font-size:16px}}@media(max-width:1024px){.sidebar{position:fixed;left:-280px;top:0;height:100vh;z-index:999;transition:left .3s ease;box-shadow:2px 0 8px rgba(0,0,0,.15)}.sidebar.mobile-visible{left:0}.mobile-nav-toggle{display:flex;align-items:center;justify-content:center}.content-wrapper{width:100%}.container{margin:10px 15px;padding:20px}.sidebar.mobile-visible::after{content:'';position:fixed;top:0;left:280px;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:-1}}@media(max-width:768px){.container{margin:10px;padding:15px}.page-header h1{font-size:22px}.breadcrumbs{font-size:12px;padding:8px 12px}.nav-section-title{font-size:13px;padding:8px 15px}.nav-link{font-size:12px;padding:6px 15px;padding-left:35px}}.under-construction-banner{background:linear-gradient(135deg,#ff9800 0%,#f57c00 100%);color:#fff;padding:12px 20px;text-align:center;font-size:14px;font-weight:600;border-bottom:3px solid #e65100;box-shadow:0 2px 8px rgba(0,0,0,.15);margin-bottom:20px}.under-construction-banner .icon{font-size:18px;margin-right:8px}.under-construction-banner strong{color:#fff;text-transform:uppercase;letter-spacing:.5px}</style><script type=application/ld+json>{"@context":"https://schema.org","@type":"TechArticle","name":"Encoder Blocks","description":"MPLAB Device Blocks for Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers","url":"https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink\/block\/encoders\/index.html","author":{"@type":"Organization","name":"Microchip Technology Inc."},"datePublished":"2025-10-17","dateModified":"2025-11-05","inLanguage":"en-US"}</script></head><body><div class=doc-wrapper><nav class=sidebar><div class=sidebar-header><h2 class=sidebar-title><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/>MPLAB Blockset</a></h2></div><div class=sidebar-nav><div class=nav-section><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/index.html class=nav-section-title><span><span class=icon>üè†</span>
<span class=nav-text>Home</span></span></a></div><div class=nav-section id=section-getting_started><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/index.html class=nav-section-title onclick='return toggleSection("getting_started"),!0'><span><span class=icon>üöÄ</span>
<span class=nav-text>Getting Started</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children style=display:none><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/board_templates.html class=nav-link>Board Templates
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/data_visualization.html class=nav-link>Data Visualization with PIC GUI
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/external_mode_pil.html class=nav-link>External Mode & PIL Testing - MPLAB Device Blocks for Simulink
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/installation.html class=nav-link>MCHP Blockset Installation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/overview.html class=nav-link>MCHP Blockset Overview
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/motor_control_examples.html class=nav-link>Motor Control Examples - MPLAB Device Blocks for Simulink
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/quick_start.html class=nav-link>Quick Start Guide
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/scheduler_multitasking.html class=nav-link>Scheduler & Multitasking - MPLAB Device Blocks for Simulink
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/getting_started/supported_devices.html class=nav-link>Supported Devices</a></div></div><div class=nav-section id=section-user_guide><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/user_guide/index.html class=nav-section-title onclick='return toggleSection("user_guide"),!0'><span><span class=icon>üìö</span>
<span class=nav-text>User Guide</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children style=display:none><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/user_guide/code_generation.html class=nav-link>Code Generation - User Guide
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/user_guide/compiler_setup.html class=nav-link>Compiler Setup - User Guide
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/user_guide/external_mode.html class=nav-link>External Mode - User Guide
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/user_guide/pil_testing.html class=nav-link>PIL Testing - User Guide</a></div></div><div class="nav-section expanded" id=section-block><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/index.html class=nav-section-title onclick='return toggleSection("block"),!0'><span><span class=icon>üß©</span>
<span class=nav-text>Block Reference</span>
</span><span class=toggle-icon>‚ñº</span></a><div class=nav-section-children><div class=nav-section id=section-pwm_io><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/index.html class=nav-section-title onclick='return toggleSection("pwm_io"),!0'><span><span class=icon>‚ö°</span>
<span class=nav-text>PWM</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children style=display:none><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/mcpwm.html class=nav-link>MCPWM
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/pwm.html class=nav-link>PWM
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/pwm_highspeed.html class=nav-link>PWM HighSpeed
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/pwm_highspeed_override.html class=nav-link>PWM HighSpeed Override
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/pwm_hs_fep.html class=nav-link>PWM HS FEP
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/pwm_sam7x.html class=nav-link>PWM SAM7x
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/pwm_sam7x_override.html class=nav-link>PWM SAM7x Override
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/pwm_io/tcc_pwm.html class=nav-link>TCC PWM</a></div></div><div class=nav-section id=section-adc><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/index.html class=nav-section-title onclick='return toggleSection("adc"),!0'><span><span class=icon>üìä</span>
<span class=nav-text>ADC Blocks</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children style=display:none><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/adc.html class=nav-link>ADC - Standard ADC Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/adc_highspeed_sar.html class=nav-link>ADC HighSpeed SAR - High-Speed SAR ADC Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/adc_highspeed_sar_dspic.html class=nav-link>ADC HighSpeed SAR dsPIC - High-Speed SAR ADC for dsPIC33C
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/adc_hs_12b.html class=nav-link>ADC HS 12b - 12-bit High-Speed ADC for dsPIC33A
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/adc_same5x.html class=nav-link>ADC SAME5x - ADC for SAM E5x/D5x/C2x Families
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/adc_samrh707x.html class=nav-link>ADC SAMRH707x - ADC for SAM RH707x Radiation-Hardened MCU
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/adc/afec_sam7x.html class=nav-link>AFEC SAM7x - Analog Front-End Controller for SAM 7x</a></div></div><div class=nav-section id=section-communication><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/index.html class=nav-section-title onclick='return toggleSection("communication"),!0'><span><span class=icon>üì°</span>
<span class=nav-text>Communication Blocks</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children style=display:none><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/can/can_config.html class=nav-link>CAN Config
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/can/can_rx.html class=nav-link>CAN Rx
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/can/can_tx.html class=nav-link>CAN Tx
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/uart/uart_break_and_autobaud.html class=nav-link>UART Break/Autobaud
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/uart/uart_config.html class=nav-link>UART Config Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/uart/uart_rx.html class=nav-link>UART Rx Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/uart/uart_tx.html class=nav-link>UART Tx Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/uart/uart_txmatlab.html class=nav-link>UART TxMatlab Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/i2c.html class=nav-link>I2C Master/Slave - Communication Blocks
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/communication/spi.html class=nav-link>SPI Master/Slave - Communication Blocks</a></div></div><div class=nav-section id=section-timers><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/timers/index.html class=nav-section-title onclick='return toggleSection("timers"),!0'><span><span class=icon>‚è±Ô∏è</span>
<span class=nav-text>Timer Blocks</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children style=display:none><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/timers/timer_config.html class=nav-link>TIMER Config - Timer Configuration Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/timers/timer_pil_profiling.html class=nav-link>TIMER PIL Profiling - PIL Timing Profiler</a></div></div><div class=nav-section id=section-capture_compare><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/capture_compare/index.html class=nav-section-title onclick='return toggleSection("capture_compare"),!0'><span><span class=icon>üìè</span>
<span class=nav-text>Input Capture / Output Compare</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children style=display:none><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/capture_compare/input_capture.html class=nav-link>IC - Input Capture Block
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/capture_compare/output_compare_hw.html class=nav-link>OC HW - Output Compare (Hardware)
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/capture_compare/output_compare_sw.html class=nav-link>OC SW - Software Output Compare</a></div></div><div class=nav-section id=section-digital_io><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/digital_io/index.html class=nav-section-title onclick='return toggleSection("digital_io"),!0'><span><span class=icon>üîå</span>
<span class=nav-text>Digital I/O Blocks</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children style=display:none><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/digital_io/digital_input.html class=nav-link>Digital Input
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/digital_io/digital_output.html class=nav-link>Digital Output
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/digital_io/digital_output_read.html class=nav-link>Digital Output Read
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/digital_io/digital_output_write.html class=nav-link>Digital Output Write</a></div></div><div class="nav-section expanded" id=section-encoders><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/index.html class="nav-section-title active" onclick='return toggleSection("encoders"),!0'><span><span class=icon>üîÑ</span>
<span class=nav-text>Encoder Blocks</span>
</span><span class=toggle-icon>‚ñº</span></a><div class=nav-section-children><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/change_notification.html class=nav-link>CN - Change Notification (Pin Interrupt)
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/pdec.html class=nav-link>PDEC - Position Decoder for SAM Devices
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/qdec_samx.html class=nav-link>QDEC SAMx - Quadrature Decoder for SAM Devices
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/qei.html class=nav-link>QEI - Quadrature Encoder Interface</a></div></div><div class=nav-section id=section-analog_io><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/index.html class=nav-section-title onclick='return toggleSection("analog_io"),!0'><span><span class=icon>üìâ</span>
<span class=nav-text>Analog I/O Blocks</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children style=display:none><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/dac_samx.html class=nav-link>MCHP DAC SAMx Documentation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator.html class=nav-link>MCHP High-Speed Analog Comparator Documentation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator_wslope.html class=nav-link>MCHP High-Speed Analog Comparator with Slope Compensation Documentation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/comparator_opamps_volt_ref/op_amp.html class=nav-link>MCHP Op-Amp Documentation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/analog_io/comparator_opamps_volt_ref/pga.html class=nav-link>MCHP PGA Documentation</a></div></div><div class=nav-section id=section-system_configuration><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/index.html class=nav-section-title onclick='return toggleSection("system_configuration"),!0'><span><span class=icon>‚öôÔ∏è</span>
<span class=nav-text>System Configuration Blocks</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children style=display:none><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/compiler_options.html class=nav-link>CompilerOptimisation
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/idle_task.html class=nav-link>IdleTask
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/interrupt.html class=nav-link>Interrupt
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/master.html class=nav-link>Master
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/mcu_load.html class=nav-link>MCU LOAD
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/mcu_overload.html class=nav-link>MCU OVERLOAD
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/scheduler_options.html class=nav-link>Scheduler Options
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/secondary_core.html class=nav-link>SECONDARY CORE
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/system_configuration/tasks_state.html class=nav-link>Tasks State</a></div></div><div class=nav-section id=section-utility><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/index.html class=nav-section-title onclick='return toggleSection("utility"),!0'><span><span class=icon>üîß</span>
<span class=nav-text>Utility Blocks</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children style=display:none><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/doc.html class=nav-link>Doc
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/msi.html class=nav-link>MSI
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/port_info.html class=nav-link>PortInfo
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/simulink_reset_config.html class=nav-link>Simulink Reset Config
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/timer_info.html class=nav-link>TimerInfo
</a><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/utility/utility.html class=nav-link>Utility Blocks</a></div></div></div></div><div class=nav-section id=section-examples><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/examples/index.html class=nav-section-title onclick='return toggleSection("examples"),!0'><span><span class=icon>üìñ</span>
<span class=nav-text>Examples</span>
</span><span class=toggle-icon>‚ñ∂</span></a><div class=nav-section-children style=display:none><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/examples/field_weakening.html class=nav-link>Field-weakening</a></div></div></div></nav><div class=content-wrapper><div class=container><div class=breadcrumbs><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/index.html>Home</a>
<span>></span>
<a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/index.html></a><span>></span>
<a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/index.html>Block Reference</a>
<span>></span>
<span>Encoder Blocks</span></div><div class=page-header><h1>Encoder Blocks</h1><div class=page-header-right><img src=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/microchip-logo.png alt="Microchip Logo" class=microchip-logo>
<button class=theme-toggle onclick=toggleTheme() aria-label="Toggle dark mode">
<span class=theme-icon id=theme-icon>‚òÄÔ∏è</span>
<span id=theme-text>Light</span></button></div></div><h2 id=overview>Overview</h2><p>Encoder blocks provide hardware-based position and velocity measurement using quadrature encoders, essential for motor control and motion feedback applications. The MPLAB Blockset offers dedicated encoder interfaces (QEI, PDEC, QDEC) that decode incremental encoder signals with zero CPU overhead, enabling precise position tracking and velocity calculation for motor control feedback loops.</p><h2 id=available-encoder-blocks>Available Encoder Blocks</h2><h3 id=mchp_qei---quadrature-encoder-interface-for-dspic>MCHP_QEI - Quadrature Encoder Interface for dsPIC</h3><div class=block-icon-container><a href=encoders_counters/qei.html class=block-card-link><div class=block-icon-image><picture><img src=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/assets/images/blocks/qei/QEI.png alt="QEI Block Icon"></picture><div class=family-tags><span class=family-tag>dsPIC30F</span>
<span class=family-tag>dsPIC33F</span>
<span class=family-tag>dsPIC33E</span>
<span class=family-tag>dsPIC33C</span></div></div><div class=block-icon-description><strong>Dedicated QEI peripheral for dsPIC</strong> with hardware quadrature decoding, velocity measurement, and index pulse support. - **Hardware Quadrature Decoding**: No CPU overhead for edge counting</div></a></div><hr><h3 id=mchp_pdec---position-decoder-for-sam-arm>MCHP_PDEC - Position Decoder for SAM ARM</h3><div class=block-icon-container><a href=encoders_counters/pdec.html class=block-card-link><div class=block-icon-image><picture><img src=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/assets/images/blocks/qei/PDEC.png alt="PDEC Block Icon"></picture><div class=family-tags><span class=family-tag>SAM</span></div></div><div class=block-icon-description><strong>Advanced position decoder for SAM</strong> with angular position tracking and configurable filtering. - **Angular Position Output**: Direct angle calculation (0-360¬∞)</div></a></div><hr><h3 id=mchp_qdec_samx---quadrature-decoder-using-tc-for-sam>MCHP_QDEC_SAMx - Quadrature Decoder using TC for SAM</h3><div class=block-icon-container><a href=encoders_counters/qdec_samx.html class=block-card-link><div class=block-icon-image><picture><img src=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/assets/images/blocks/qei/QDEC_SAMx.png alt="QDEC_SAMx Block Icon"></picture><div class=family-tags><span class=family-tag>SAM</span></div></div><div class=block-icon-description><strong>Timer/Counter-based quadrature decoder</strong> for SAM devices without dedicated PDEC. - **TC Module Quadrature Mode**: Uses Timer/Counter peripheral</div></a></div><hr><h3 id=mchp_changenotification---software-encoder-decoding>MCHP_ChangeNotification - Software Encoder Decoding</h3><div class=block-icon-container><a href=encoders_counters/change_notification.html class=block-card-link><div class=block-icon-image><picture><img src=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/assets/images/blocks/qei/ChangeNotification.png alt="ChangeNotification Block Icon"></picture><div class=family-tags><span class=family-tag>dsPIC30F</span>
<span class=family-tag>dsPIC33F</span>
<span class=family-tag>dsPIC33E</span>
<span class=family-tag>dsPIC33C</span>
<span class=family-tag>PIC32</span></div></div><div class=block-icon-description><strong>GPIO interrupt-based encoder decoding</strong> for devices without dedicated QEI/PDEC peripherals. - **Software Decoding**: Interrupt-driven quadrature state machine</div></a></div><hr><h2 id=block-selection-guide>Block Selection Guide</h2><h3 id=by-device-family>By Device Family</h3><table><thead><tr><th>Device Family</th><th>Recommended Block</th><th>Alternative</th><th>Notes</th></tr></thead><tbody><tr><td><strong>dsPIC30F / 33F / 33E</strong></td><td><strong>QEI</strong></td><td>ChangeNotification</td><td>QEI preferred for motor control</td></tr><tr><td><strong>dsPIC33C / 33A</strong></td><td><strong>QEI</strong></td><td>ChangeNotification</td><td>Enhanced QEI with improved filtering</td></tr><tr><td><strong>SAM E5x / D5x / E7x / S7x / V7x</strong></td><td><strong>PDEC</strong></td><td>QDEC_SAMx</td><td>PDEC preferred for angular output</td></tr><tr><td><strong>SAM C20 / C21 / D20 / D21</strong></td><td><strong>QDEC_SAMx</strong></td><td>ChangeNotification</td><td>TC-based quadrature mode</td></tr><tr><td><strong>PIC24</strong></td><td><strong>ChangeNotification</strong></td><td>-</td><td>No dedicated QEI on PIC24</td></tr><tr><td><strong>PIC32</strong></td><td><strong>ChangeNotification</strong></td><td>-</td><td>No dedicated QEI on PIC32</td></tr></tbody></table><h3 id=by-encoder-speed>By Encoder Speed</h3><table><thead><tr><th>Encoder Speed</th><th>Recommended Approach</th><th>Maximum PPR</th><th>Block Choice</th></tr></thead><tbody><tr><td><strong>&lt; 1000 RPM</strong></td><td>Software or Hardware</td><td>Up to 5000 PPR</td><td>ChangeNotification or QEI</td></tr><tr><td><strong>1000-5000 RPM</strong></td><td>Hardware only</td><td>Up to 2048 PPR</td><td>QEI, PDEC, QDEC_SAMx</td></tr><tr><td><strong>5000-10000 RPM</strong></td><td>Hardware with filtering</td><td>Up to 1024 PPR</td><td>QEI (4x mode), PDEC</td></tr><tr><td><strong>> 10000 RPM</strong></td><td>Hardware only, low PPR</td><td>Up to 512 PPR</td><td>QEI with digital filter</td></tr></tbody></table><p><strong>PPR Calculation</strong>: Maximum edge frequency = (RPM √ó PPR √ó 4) / 60</p><ul><li>Example: 10000 RPM √ó 1024 PPR √ó 4 = 682 kHz edge rate (challenging for most MCUs)</li></ul><h3 id=by-application-requirements>By Application Requirements</h3><table><thead><tr><th>Application</th><th>Block Choice</th><th>Why?</th></tr></thead><tbody><tr><td><strong>3-Phase FOC Motor Control</strong></td><td>QEI (dsPIC) or PDEC (SAM)</td><td>Hardware velocity measurement, zero CPU overhead</td></tr><tr><td><strong>Servo Positioning</strong></td><td>QEI or PDEC</td><td>Index pulse support, high-resolution position</td></tr><tr><td><strong>Robotic Joint</strong></td><td>PDEC or QEI</td><td>Angular position output, multi-turn tracking</td></tr><tr><td><strong>BLDC Sensorless + Encoder Backup</strong></td><td>QEI or PDEC</td><td>Redundant position feedback</td></tr><tr><td><strong>Low-Cost Motor Control</strong></td><td>QDEC_SAMx</td><td>TC-based, available on entry-level SAM</td></tr><tr><td><strong>Legacy Device Encoder</strong></td><td>ChangeNotification</td><td>Software decoding, no dedicated peripheral needed</td></tr></tbody></table><hr><h2 id=encoder-fundamentals>Encoder Fundamentals</h2><h3 id=quadrature-encoding-basics>Quadrature Encoding Basics</h3><p><strong>Quadrature encoder signals:</strong></p><ul><li><strong>Channel A</strong>: Primary position signal</li><li><strong>Channel B</strong>: Phase-shifted signal (90¬∞ ahead for forward rotation)</li><li><strong>Index (Z)</strong>: One pulse per revolution (optional, for absolute reference)</li></ul><p><strong>Decoding Modes:</strong></p><ul><li><strong>1x Mode</strong>: Count edges of Channel A only (lowest resolution)</li><li><strong>2x Mode</strong>: Count rising and falling edges of Channel A</li><li><strong>4x Mode</strong>: Count all edges of A and B (highest resolution, 4√ó PPR)</li></ul><p><strong>Direction Detection:</strong></p><ul><li><strong>Forward</strong>: Channel A leads Channel B by 90¬∞</li><li><strong>Reverse</strong>: Channel B leads Channel A by 90¬∞</li></ul><h3 id=position-and-velocity-calculation>Position and Velocity Calculation</h3><p><strong>Position:</strong></p><pre tabindex=0><code>Position (counts) = Edge_Counter / 4   (for 4x mode)
Position (mechanical degrees) = (Position_counts / PPR) √ó 360¬∞
Position (electrical degrees) = Position_mechanical √ó Pole_Pairs
</code></pre><p><strong>Velocity:</strong></p><pre tabindex=0><code>RPM = (Delta_Position / Delta_Time) √ó 60 / PPR

Example:
- PPR = 1024
- Delta_Position = 5000 counts (in 4x mode)
- Delta_Time = 10 ms (0.01 s)
- RPM = (5000 / (1024 √ó 4)) / 0.01 √ó 60 = 7324 RPM
</code></pre><p><strong>Hardware velocity measurement</strong> (QEI, PDEC):</p><ul><li>Uses timer to measure interval between encoder edges</li><li>More accurate at low speeds than position differentiation</li><li>Automatically handles direction</li></ul><hr><h2 id=encoder-wiring-and-electrical-considerations>Encoder Wiring and Electrical Considerations</h2><h3 id=encoder-types>Encoder Types</h3><table><thead><tr><th>Encoder Type</th><th>Outputs</th><th>Voltage</th><th>Recommended Pull</th><th>Use Case</th></tr></thead><tbody><tr><td><strong>Push-Pull (TTL)</strong></td><td>Active high/low</td><td>5V or 3.3V</td><td>None</td><td>High-speed, short cables</td></tr><tr><td><strong>Open Collector</strong></td><td>Open drain</td><td>5-24V</td><td>External pull-up (2.2kŒ© - 10kŒ©)</td><td>Industrial, long cables</td></tr><tr><td><strong>Differential (RS-422)</strong></td><td>A/A-, B/B-</td><td>5V differential</td><td>Line receiver IC</td><td>Noisy environments, long cables (>10 m)</td></tr></tbody></table><h3 id=noise-immunity>Noise Immunity</h3><p><strong>Digital Filter (QEI/PDEC):</strong></p><ul><li><strong>Purpose</strong>: Reject switch bounce and electrical noise</li><li><strong>Setting</strong>: 3-7 clock cycles typical</li><li><strong>Trade-off</strong>: More filtering = slower response to high-speed edges</li></ul><p><strong>Hardware Recommendations:</strong></p><ul><li><strong>Twisted pair wiring</strong>: Reduces EMI pickup</li><li><strong>Shielded cable</strong>: Ground shield at one end only</li><li><strong>Bypass capacitors</strong>: 100 nF at encoder connector (close to MCU pins)</li><li><strong>Series resistors</strong>: 100Œ© on A/B/Z lines (current limiting, ESD protection)</li></ul><hr><h2 id=troubleshooting-common-issues>Troubleshooting Common Issues</h2><h3 id=encoder-not-counting>Encoder Not Counting</h3><p><strong>Check:</strong></p><ul><li>‚úÖ Encoder power supply (5V or 12V/24V for industrial encoders)</li><li>‚úÖ Ground connection between encoder and MCU</li><li>‚úÖ QEI/PDEC peripheral enabled in block</li><li>‚úÖ Pin assignments correct (use Port Info block to verify)</li><li>‚úÖ Encoder actually rotating (use Digital_Input block to check raw signals)</li></ul><h3 id=wrong-direction>Wrong Direction</h3><p><strong>Check:</strong></p><ul><li>‚úÖ Swap Channel A and B in block configuration</li><li>‚úÖ Or use &ldquo;Invert Direction&rdquo; option if available</li><li>‚úÖ Verify encoder wiring matches datasheet</li></ul><h3 id=position-jumps-or-noise>Position Jumps or Noise</h3><p><strong>Check:</strong></p><ul><li>‚úÖ Increase digital filter setting (5-7 clock cycles)</li><li>‚úÖ Add external 100 nF capacitors on A/B/Z lines</li><li>‚úÖ Use shielded twisted pair cable</li><li>‚úÖ Check for EMI sources (PWM switching, motor cables)</li><li>‚úÖ Reduce maximum encoder speed (lower PPR encoder)</li></ul><h3 id=velocity-measurement-unstable>Velocity Measurement Unstable</h3><p><strong>Check:</strong></p><ul><li>‚úÖ Use hardware velocity measurement (QEI/PDEC) instead of position differentiation</li><li>‚úÖ Increase velocity measurement time window</li><li>‚úÖ Add low-pass filter on velocity output (cutoff ~10-50 Hz)</li><li>‚úÖ Check encoder PPR not too high for motor speed range</li></ul><hr><h2 id=device-family-support-summary>Device Family Support Summary</h2><table><thead><tr><th>Encoder Block</th><th>dsPIC30F</th><th>dsPIC33F</th><th>dsPIC33E</th><th>dsPIC33C</th><th>dsPIC33A</th><th>PIC24</th><th>PIC32</th><th>SAM E5x</th><th>SAM E7x</th><th>SAM C2x</th></tr></thead><tbody><tr><td>QEI</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td></tr><tr><td>PDEC</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td><td>‚úÖ</td><td>‚úÖ</td><td>‚ùå</td></tr><tr><td>QDEC_SAMx</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td><td>‚ùå</td><td>‚ö†Ô∏è</td><td>‚ö†Ô∏è</td><td>‚úÖ</td></tr><tr><td>ChangeNotification</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td><td>‚úÖ</td></tr></tbody></table><p><strong>Legend:</strong> ‚úÖ Full Support | ‚ö†Ô∏è Available but PDEC preferred | ‚ùå Not Available</p><hr><h2 id=see-also>See Also</h2><p><strong>Related Block Categories:</strong></p><ul><li><strong><a href=../pwm_io/>PWM Blocks</a></strong> - For motor control PWM generation</li><li><strong><a href=../timers/>Timer Blocks</a></strong> - For velocity measurement timing</li><li><strong><a href=../digital_io/>Digital I/O Blocks</a></strong> - For software encoder decoding</li></ul><p><strong>Application Notes:</strong></p><ul><li><a href=https://www.microchip.com/AN1078>AN1078</a> - Sensorless Field-Oriented Control with Encoder Option</li><li><a href=https://www.microchip.com/AN1292>AN1292</a> - Sensorless FOC with Encoder Backup</li><li><a href=https://www.microchip.com/DS70601B>DS70601B</a> - QEI Module Family Reference Manual</li></ul><p><strong>Example Projects:</strong></p><ul><li><a href=../../getting_started/motor_control_examples.html>Motor Control Examples</a> - FOC with encoder feedback</li><li><a href=../../getting_started/board_templates.html>Board Templates</a> - Pre-configured encoder setups</li></ul><hr><p><strong>üí° Quick Selection Guide:</strong></p><ul><li><strong>Using dsPIC for motor control?</strong> ‚Üí QEI (hardware, zero overhead)</li><li><strong>Using SAM E5x/E7x for motors?</strong> ‚Üí PDEC (angular output, hardware velocity)</li><li><strong>Using SAM C2x cost-optimized?</strong> ‚Üí QDEC_SAMx (TC-based)</li><li><strong>Need encoder on any device?</strong> ‚Üí ChangeNotification (software, universally available)</li><li><strong>High-speed encoder (> 5000 RPM)?</strong> ‚Üí QEI or PDEC only (hardware required)</li></ul><h2><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/change_notification.html>CN - Change Notification (Pin Interrupt)</a></h2><div class=block-icon-container><div class=block-icon-image><picture><source srcset=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/digital/ChangeNotification.svg type=image/svg+xml><source srcset=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/digital/ChangeNotification_hu_852ac152d222f9ce.webp type=image/webp><img src=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/digital/ChangeNotification.png alt="Change Notification Block Icon"></picture></div><div class=block-icon-description>Change Notification - Pin State Change Interrupts and Timing</div></div><h2 id=overview>Overview</h2><p>The MCHP_CN block provides an interface to the Change Notification (CN) peripheral, which detects pin state changes and measures transition timing. While primarily used for GPIO interrupts (buttons, switches), CN can also serve as a simple encoder interface or pulse counter.
<strong>Key Features:</strong></p><ul><li>Multi-pin state change detection (up to 32 CN pins)</li><li>Edge detection: rising, falling, or both</li><li>Transition timing measurement (time between edges)</li><li>Period measurement (rising-to-rising or falling-to-falling)</li><li>Programmable pull-up/pull-down resistors</li><li>Interrupt generation on pin change</li><li>Wake from sleep on pin change</li><li>Can be used for simple rotary encoders or pulse counting</li></ul><h3 id=device-support>Device Support</h3><table><thead><tr><th>Family</th><th>CN Type</th><th>CN Pins</th><th>Notes</th></tr></thead><tbody><tr><td>dsPIC30F</td><td>Type 0</td><td>CN0-CN15</td><td>Dedicated CN peripheral</td></tr><tr><td>dsPIC33F</td><td>Type 0</td><td>CN0-CN23</td><td>Dedicated CN peripheral</td></tr><tr><td>dsPIC33E</td><td>Type 1</td><td>All GPIO pins</td><td>All ports have CN capability</td></tr><tr><td>dsPIC33C</td><td>Type 1</td><td>All GPIO pins</td><td>All ports have CN capability</td></tr><tr><td>PIC32MK</td><td>Type 2</td><td>Port-based</td><td>One interrupt per port</td></tr><tr><td>PIC24F</td><td>Type 0/1</td><td>Varies</td><td>Family dependent</td></tr></tbody></table><h2 id=block-parameters>Block Parameters</h2><h3 id=channel-selection>Channel Selection</h3><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>CN Channels (dsPIC30F/33F)</td><td>Vector of CN channel numbers, e.g., [0 1 2] for CN0, CN1, CN2</td></tr><tr><td>CN Port (dsPIC33E/C, PIC32MK)</td><td>Port pin list, e.g., [A0 A1 B5] for PA0, PA1, PB5</td></tr></tbody></table><h3 id=measurement-configuration-per-channel>Measurement Configuration (per channel)</h3><table><thead><tr><th>Mode Value</th><th>Measurement</th><th>Output Ports</th></tr></thead><tbody><tr><td>0</td><td>Change detect only</td><td>Change detected flag only</td></tr><tr><td>1</td><td>Measure time UP (rising edge to falling edge)</td><td>T_Up (pulse width high)</td></tr><tr><td>2</td><td>Measure time DOWN (falling edge to rising edge)</td><td>T_Down (pulse width low)</td></tr><tr><td>3</td><td>Measure UP & DOWN</td><td>T_Up, T_Down</td></tr><tr><td>4</td><td>Period on rising edge</td><td>P_Rising (time between rising edges)</td></tr><tr><td>8</td><td>Period on falling edge</td><td>P_Falling (time between falling edges)</td></tr><tr><td>5</td><td>UP + Period on rising</td><td>T_Up, P_Rising</td></tr><tr><td>10</td><td>DOWN + Period on falling</td><td>T_Down, P_Falling</td></tr></tbody></table><h3 id=change-detection-per-channel>Change Detection (per channel)</h3><table><thead><tr><th>Value</th><th>Detection Mode</th><th>Output</th></tr></thead><tbody><tr><td>0</td><td>No change detection</td><td>-</td></tr><tr><td>1</td><td>Rising edge</td><td>CNx_Rise (timestamp)</td></tr><tr><td>2</td><td>Falling edge</td><td>CNx_Fall (timestamp)</td></tr><tr><td>3</td><td>Both edges</td><td>CNx_Rise&amp;Fall (timestamp)</td></tr></tbody></table><h3 id=advanced-configuration>Advanced Configuration</h3><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>Output Port Value</td><td>Enable current pin state output (boolean per channel)</td></tr><tr><td>Max Channel</td><td>Maximum expected time for measurements (seconds, per channel)</td></tr><tr><td>Safe Margin</td><td>Percentage margin for timer overflow protection (per channel)</td></tr><tr><td>Interrupt Priority</td><td>CN interrupt priority level (1-7)</td></tr></tbody></table><h2 id=cn-peripheral-registers>CN Peripheral Registers</h2><h3 id=dspic30f33f-type-0>dsPIC30F/33F (Type 0)</h3><p>// Enable CN module CNCONbits.ON = 1; // Enable specific CN pins CNEN1bits.CN0IE = 1; // Enable CN0 CNEN1bits.CN1IE = 1; // Enable CN1// Enable pull-ups CNPU1bits.CN0PUE = 1; // Pull-up on CN0// Interrupt configuration IFS1bits.CNIF = 0; // Clear interrupt flag IEC1bits.CNIE = 1; // Enable CN interrupt IPC4bits.CNIP = 5; // Priority level// Read current state state = PORTBbits.RB0; // Read pin state (if CN0 is on RB0)</p><h2><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/pdec.html>PDEC - Position Decoder for SAM Devices</a></h2><div class=block-icon-container><div class=block-icon-image><picture><source srcset=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/digital/PDEC.svg type=image/svg+xml><source srcset=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/digital/PDEC_hu_ac88e49fe226bfd2.webp type=image/webp><img src=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/digital/PDEC.png alt="PDEC Block Icon"></picture></div><div class=block-icon-description>Position Decoder - Hall Sensors and Stepper Motor Interface</div></div><h2 id=overview>Overview</h2><p>The MCHP_PDEC block provides an interface to the Position Decoder (PDEC) peripheral on SAM E5x and E7x microcontrollers. Unlike traditional quadrature encoders, PDEC is optimized for Hall effect sensors (3-phase BLDC motors) and stepper motor position tracking, with specialized features for these applications.
<strong>Key Features:</strong></p><ul><li>3-input position decoder (Hall sensors: A, B, C)</li><li>Quadrature encoder mode (X2/X4)</li><li>Counter with direction input mode</li><li>Configurable position counter and revolution counter</li><li>Auto-correction for phase errors</li><li>Programmable digital filtering</li><li>Index pulse support</li><li>Angular position calculation (9-bit + configurable resolution)</li></ul><h3 id=device-support>Device Support</h3><table><thead><tr><th>Family</th><th>PDEC Module</th><th>Features</th></tr></thead><tbody><tr><td>SAM E54/E53/E51</td><td>1</td><td>Hall sensor, quadrature, stepper position</td></tr><tr><td>SAM E70/S70/V71</td><td>1</td><td>Hall sensor, quadrature, stepper position</td></tr></tbody></table><h2 id=block-parameters>Block Parameters</h2><h3 id=operating-mode>Operating Mode</h3><table><thead><tr><th>Parameter</th><th>Options</th><th>Description</th></tr></thead><tbody><tr><td>Mode</td><td>‚Ä¢ Quadrature Encoder</td><td>‚Ä¢ Counter with direction</td></tr></tbody></table><h3 id=position-configuration>Position Configuration</h3><table><thead><tr><th>Parameter</th><th>Options</th><th>Description</th></tr></thead><tbody><tr><td>Counter Output</td><td>on/off</td><td>Enable position counter output</td></tr><tr><td>Counter Datatype</td><td>unsigned/signed</td><td>Position counter sign</td></tr><tr><td>Revolution Output</td><td>on/off</td><td>Enable revolution counter</td></tr><tr><td>Revolution Datatype</td><td>unsigned/signed</td><td>Revolution counter sign</td></tr><tr><td>Counter Revolution Length</td><td>‚Ä¢ Counter is 16-bit (9+7 bit resolution)</td><td>‚Ä¢ Counter is 17-bit (9+8 bit resolution)</td></tr></tbody></table><h3 id=index-and-reset>Index and Reset</h3><table><thead><tr><th>Parameter</th><th>Options</th><th>Description</th></tr></thead><tbody><tr><td>Index</td><td>‚Ä¢ Not used</td><td>‚Ä¢ Reset counter</td></tr><tr><td>Max Counter Reset</td><td>Integer value</td><td>Modulo limit for position counter</td></tr><tr><td>Max Position Input</td><td>on/off</td><td>Enable dynamic modulo limit via block input</td></tr><tr><td>Reset Input</td><td>on/off</td><td>Enable external reset input</td></tr></tbody></table><h3 id=signal-configuration>Signal Configuration</h3><table><thead><tr><th>Pin</th><th>Function (Quadrature)</th><th>Function (Hall Sensor)</th></tr></thead><tbody><tr><td>QDI0</td><td>Phase A</td><td>Hall A</td></tr><tr><td>QDI1</td><td>Phase B</td><td>Hall B</td></tr><tr><td>QDI2</td><td>Index</td><td>Hall C</td></tr><tr><td>Parameter</td><td>Options</td><td>Description</td></tr><tr><td>Invert QDI0/1/2</td><td>on/off</td><td>Invert input polarity</td></tr><tr><td>Swap Pin Phase A & B</td><td>on/off</td><td>Reverse direction (quadrature mode)</td></tr><tr><td>Auto Correction</td><td>on/off</td><td>Automatic phase error correction</td></tr><tr><td>Digital Filter</td><td>disabled or time period</td><td>Input signal filtering</td></tr></tbody></table><h2 id=hall-sensor-operation>Hall Sensor Operation</h2><h3 id=3-phase-hall-sensor-interface>3-Phase Hall Sensor Interface</h3><p>PDEC decodes 3-wire Hall sensor signals for BLDC motor position:
Hall Sensor States (6-step commutation): State | Hall A | Hall B | Hall C | Sector &mdash;&mdash;-|&mdash;&mdash;&ndash;|&mdash;&mdash;&ndash;|&mdash;&mdash;&ndash;|&mdash;&mdash;&ndash; 1 | 0 | 0 | 1 | 0-60¬∞ 2 | 0 | 1 | 1 | 60-120¬∞ 3 | 0 | 1 | 0 | 120-180¬∞ 4 | 1 | 1 | 0 | 180-240¬∞ 5 | 1 | 0 | 0 | 240-300¬∞ 6 | 1 | 0 | 1 | 300-360¬∞ Valid transitions: 1‚Üí2‚Üí3‚Üí4‚Üí5‚Üí6‚Üí1 (CW) 1‚Üí6‚Üí5‚Üí4‚Üí3‚Üí2‚Üí1 (CCW)</p><h2><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/qdec_samx.html>QDEC SAMx - Quadrature Decoder for SAM Devices</a></h2><div class=block-icon-container><div class=block-icon-image><picture><source srcset=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/digital/QDEC_SAMx.svg type=image/svg+xml><source srcset=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/digital/QDEC_SAMx_hu_f4b3c4a998d58aca.webp type=image/webp><img src=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/digital/QDEC_SAMx.png alt="QDEC SAMx Block Icon"></picture></div><div class=block-icon-description>Quadrature Decoder Using TC Modules - SAM Device Encoder Interface</div></div><h2 id=overview>Overview</h2><p>The MCHP_QDEC_SAMx block implements quadrature encoder decoding using the Timer/Counter (TC) modules on SAM microcontrollers (E5x, E7x, C2x). Unlike dedicated QEI peripherals, this implementation uses TC modules in quadrature mode to decode encoder signals for position and speed measurement.
<strong>Key Features:</strong></p><ul><li>Quadrature position decoding using TC modules</li><li>32-bit position counter with revolution counter</li><li>Index pulse support for position reset</li><li>Direction detection</li><li>Speed measurement using time base</li><li>Phase error detection (quadrature integrity check)</li><li>Missing pulse error detection</li><li>Configurable digital filtering</li><li>Rotation change flag</li></ul><h3 id=device-support>Device Support</h3><table><thead><tr><th>Family</th><th>TC Modules</th><th>Max QDEC Instances</th><th>Features</th></tr></thead><tbody><tr><td>SAM E54/E53</td><td>TC0-TC7</td><td>2-4</td><td>Position, speed, index, error detection</td></tr><tr><td>SAM E70/S70/V71</td><td>TC0-TC11</td><td>4</td><td>Position, speed, index, error detection</td></tr><tr><td>SAM C21</td><td>TC0-TC7</td><td>2-4</td><td>Position, speed, index, error detection</td></tr></tbody></table><p><strong>Important:</strong> Each QDEC instance requires 3 TC channels (one complete TC module). For example, TC0 uses channels 0, 1, and 2 for phase A/B counting, index counting, and speed time base respectively.</p><h2><a href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block/encoders/qei.html>QEI - Quadrature Encoder Interface</a></h2><div class=block-icon-container><div class=block-icon-image><picture><source srcset=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/digital/QEI.svg type=image/svg+xml><source srcset=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/digital/QEI_hu_a8e4c27744a4f455.webp type=image/webp><img src=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/images/blocks/digital/QEI.png alt="QEI Block Icon"></picture></div><div class=block-icon-description>Quadrature Encoder Interface - Position and Velocity Measurement</div></div><h2 id=overview>Overview</h2><p>The MCHP_QEI block provides an interface to the Quadrature Encoder Interface (QEI) peripheral available on dsPIC and PIC32 microcontrollers. This peripheral decodes quadrature encoder signals to measure position, direction, and velocity of rotating shafts, making it ideal for motor control and precision positioning applications.
<strong>Key Features:</strong></p><ul><li>Quadrature decoding (X2 and X4 modes)</li><li>16-bit or 32-bit position counter</li><li>Index pulse detection and position reset</li><li>Direction sensing</li><li>Programmable digital filtering</li><li>Velocity measurement (32-bit QEI only)</li><li>Multiple operating modes: encoder, pulse counter, up/down counter</li><li>Position modulo and reset options</li></ul><h3 id=device-support>Device Support</h3><table><thead><tr><th>Family</th><th>QEI Type</th><th>Max Modules</th><th>Features</th></tr></thead><tbody><tr><td>dsPIC30F</td><td>16-bit</td><td>1-2</td><td>Basic quadrature decoding, index reset</td></tr><tr><td>dsPIC33F</td><td>16-bit</td><td>1-2</td><td>Basic quadrature decoding, index reset</td></tr><tr><td>dsPIC33E</td><td>32-bit</td><td>1-2</td><td>Extended position counter, velocity measurement</td></tr><tr><td>dsPIC33C</td><td>32-bit</td><td>1-2</td><td>Extended position counter, velocity measurement</td></tr><tr><td>dsPIC33A</td><td>32-bit</td><td>1-2</td><td>Enhanced position/velocity, advanced filtering</td></tr><tr><td>PIC32MK</td><td>32-bit</td><td>1-2</td><td>Extended features, modulo with index reset</td></tr></tbody></table><h2 id=block-parameters>Block Parameters</h2><h3 id=operating-mode>Operating Mode</h3><table><thead><tr><th>Parameter</th><th>Options</th><th>Description</th></tr></thead><tbody><tr><td>QEI Mode</td><td>‚Ä¢ Quadrature Encoder</td><td>‚Ä¢ External Pulse Counter</td></tr><tr><td>X2/X4 Mode</td><td>on/off (16-bit QEI only)</td><td>X2: 2 counts/line, X4: 4 counts/line</td></tr></tbody></table><h3 id=position-counter-configuration>Position Counter Configuration</h3><table><thead><tr><th>Parameter</th><th>Options</th><th>Description</th></tr></thead><tbody><tr><td>Position Output</td><td>‚Ä¢ is not an output</td><td>‚Ä¢ 16-bit unsigned</td></tr><tr><td>Position Reset Mode</td><td>‚Ä¢ Never reset</td><td>‚Ä¢ Reset on INDEX</td></tr><tr><td>Modulo Limits</td><td>[Low High] vector</td><td>Position counter modulo boundaries</td></tr><tr><td>Initial Value</td><td>Integer</td><td>Position initialization value</td></tr></tbody></table><h3 id=index-pulse-configuration>Index Pulse Configuration</h3><table><thead><tr><th>Parameter</th><th>Options</th><th>Description</th></tr></thead><tbody><tr><td>Index Counter Output</td><td>‚Ä¢ is not an output</td><td>‚Ä¢ 16-bit unsigned/signed</td></tr><tr><td>Index Match Value</td><td>QEA/QEB state (00, 01, 10, 11)</td><td>Encoder state when index is valid</td></tr><tr><td>Index Polarity</td><td>Active high/low</td><td>Index pulse polarity</td></tr></tbody></table><h3 id=velocity-measurement-32-bit-qei>Velocity Measurement (32-bit QEI)</h3><table><thead><tr><th>Parameter</th><th>Options</th><th>Description</th></tr></thead><tbody><tr><td>Velocity Output</td><td>‚Ä¢ is not an output</td><td>‚Ä¢ 16-bit unsigned</td></tr><tr><td>Period Output</td><td>‚Ä¢ is not an output</td><td>‚Ä¢ 16-bit unsigned</td></tr><tr><td>Max Period</td><td>Time (seconds)</td><td>Maximum period for velocity calculation</td></tr></tbody></table><h3 id=signal-conditioning>Signal Conditioning</h3><table><thead><tr><th>Parameter</th><th>Options</th><th>Description</th></tr></thead><tbody><tr><td>Digital Filter</td><td>on/off</td><td>Enable input signal filtering</td></tr><tr><td>Filter Cutoff Freq</td><td>Frequency (Hz)</td><td>Low-pass filter cutoff frequency</td></tr><tr><td>Swap QEA/QEB</td><td>on/off</td><td>Reverse encoder direction</td></tr><tr><td>Invert Polarity</td><td>QEA, QEB, INDEX, HOME</td><td>Invert input signal polarity</td></tr></tbody></table><h3 id=pin-configuration-remappable-devices>Pin Configuration (Remappable Devices)</h3><table><thead><tr><th>Pin</th><th>Function</th><th>Description</th></tr></thead><tbody><tr><td>QEA/QEIA</td><td>Phase A Input</td><td>Encoder channel A (or pulse input)</td></tr><tr><td>QEB/QEIB</td><td>Phase B Input</td><td>Encoder channel B (or direction input)</td></tr><tr><td>INDEX/QEINDX</td><td>Index Input</td><td>Index pulse for position reset</td></tr><tr><td>HOME/QEIHOM</td><td>Home Input</td><td>Home reference signal (optional)</td></tr></tbody></table><h2 id=quadrature-encoding-principles>Quadrature Encoding Principles</h2><h3 id=x4-quadrature-decoding>X4 Quadrature Decoding</h3><p>In X4 mode, the QEI peripheral counts on both rising and falling edges of both channels, providing 4 counts per encoder line:
QEA <em><strong>‚îå‚îÄ‚îÄ‚îÄ‚îê</strong></em>‚îå‚îÄ‚îÄ‚îÄ‚îê<em><strong>‚îå‚îÄ‚îÄ‚îÄ‚îê</strong></em>‚îå‚îÄ‚îÄ‚îÄ‚îê___ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îò QEB <em><strong><em><strong>‚îå‚îÄ‚îÄ‚îÄ‚îê</strong></em>‚îå‚îÄ‚îÄ‚îÄ‚îê</strong></em>‚îå‚îÄ‚îÄ‚îÄ‚îê___‚îå‚îÄ‚îÄ‚îÄ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ____‚îî‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ Count: 0 1 2 3 4 5 6 7 8 9 10 11 12 Direction: FORWARD (QEA leads QEB by 90¬∞)</p><div class=nav-footer><p>Last updated: November 2025 | MPLAB Blockset Documentation v3.63a</p><p>&copy; 2025 Microchip Technology Incorporated and its subsidiaries</p><p style=font-size:10px;margin-top:8px;line-height:1.4>The "Microchip" name and logo, the "M" logo, and other names, logos, and brands are registered
and unregistered trademarks of Microchip Technology Incorporated or its affiliates and/or
subsidiaries in the United States and/or other countries ("Microchip Trademarks"). Information
regarding Microchip Trademarks can be found at
<a href=https://www.microchip.com/en-us/about/legal-information/microchip-trademarks target=_blank style=color:var(--accent-primary)>https://www.microchip.com/en-us/about/legal-information/microchip-trademarks</a>.</p></div></div></div><button class=mobile-nav-toggle onclick=toggleMobileSidebar() aria-label="Toggle navigation">
‚ò∞</button></div><script>function toggleTheme(){const t=document.documentElement,n=t.getAttribute("data-theme"),e=n==="dark"?"light":"dark";t.setAttribute("data-theme",e),localStorage.setItem("theme",e),updateThemeButton(e)}function updateThemeButton(e){const t=document.getElementById("theme-icon"),n=document.getElementById("theme-text");e==="dark"?(t.textContent="üåô",n.textContent="Dark"):(t.textContent="‚òÄÔ∏è",n.textContent="Light")}(function(){const n=localStorage.getItem("theme"),s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=n||(s?"dark":"light");document.documentElement.setAttribute("data-theme",t),updateThemeButton(t)})(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{if(!localStorage.getItem("theme")){const t=e.matches?"dark":"light";document.documentElement.setAttribute("data-theme",t),updateThemeButton(t)}}),window.toggleSection=function(e){const t=document.getElementById("section-"+e);if(t&&(t.classList.toggle("expanded"),t.classList.contains("nav-section"))){const n=getExpandedSections();t.classList.contains("expanded")?n.add(e):n.delete(e),localStorage.setItem("expandedSections",JSON.stringify([...n]))}};function getExpandedSections(){const e=localStorage.getItem("expandedSections");return new Set(e?JSON.parse(e):[])}function restoreExpandedSections(){const e=getExpandedSections();e.forEach(e=>{const t=document.getElementById("section-"+e);t&&t.classList.add("expanded")})}function highlightActivePage(){const e=window.location.pathname,t=document.querySelectorAll(".nav-link, .nav-block-link, .nav-section-title[href], .nav-subsection-title[href]");t.forEach(t=>{const n=new URL(t.href,window.location.origin).pathname;if(n===e){t.classList.add("active");const n=t.closest(".nav-subsection");n&&!n.classList.contains("expanded")&&n.classList.add("expanded");const e=t.closest(".nav-section");if(e&&!e.classList.contains("expanded")){e.classList.add("expanded");const n=e.id.replace("section-",""),t=getExpandedSections();t.add(n),localStorage.setItem("expandedSections",JSON.stringify([...t]))}}})}window.toggleMobileSidebar=function(){const e=document.querySelector(".sidebar");e&&e.classList.toggle("mobile-visible")},function(){restoreExpandedSections(),highlightActivePage();const t=document.querySelector(".nav-link.active");if(t){const e=t.closest(".nav-section");if(e&&e.id){const n=e.id.replace("section-",""),t=getExpandedSections();t.has(n)||(t.add(n),localStorage.setItem("expandedSections",JSON.stringify([...t])))}}}()</script></body></html>