<!doctype html><html lang=en><head><title>CAN Communication Blocks - MPLAB Blockset for MATLAB/Simulink</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Microchip Blockset for MATLAB/Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers"><meta name=keywords content="Microchip,MPLAB,MATLAB,Simulink,dsPIC,PIC32,Embedded,Code Generation,Motor Control"><meta name=author content="Microchip Technology Inc."><meta name=robots content="index, follow"><meta http-equiv=X-UA-Compatible content="IE=edge"><link rel=canonical href=https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink/block_reference/can.html><link rel=icon type=image/x-icon href=../favicon.ico><style>:root{--bg-primary:#f8f9fa;--bg-secondary:white;--bg-tertiary:#f8f9fa;--text-primary:#2c3e50;--text-secondary:#666;--text-tertiary:#6c757d;--text-heading:#003d5c;--border-color:#dee2e6;--border-light:#e1e8ed;--border-medium:#e9ecef;--accent-primary:#0076A8;--accent-secondary:#005a85;--accent-hover:#005580;--accent-light:#e3f2fd;--code-bg:#f4f4f4;--code-text:#c7254e;--pre-bg:linear-gradient(to bottom, #e8e8e8 0%, #f0f0f0 100%);--pre-border:#d0d0d0;--table-hover:#e3f2fd;--table-stripe:#f8f9fa;--note-bg:linear-gradient(to right, #e7f3fe 0%, #f5fbff 100%);--note-border:#2196F3;--note-text:#1976D2;--warning-bg:linear-gradient(to right, #fff9e6 0%, #fffcf0 100%);--warning-border:#ff9800;--warning-text:#f57c00;--shadow-sm:0 2px 4px rgba(0,0,0,0.05);--shadow-md:0 2px 8px rgba(0,0,0,0.08);--shadow-lg:0 2px 12px rgba(0,0,0,0.08)}[data-theme=dark]{--bg-primary:#1a1d23;--bg-secondary:#242831;--bg-tertiary:#2d3139;--text-primary:#e4e6eb;--text-secondary:#adb5bd;--text-tertiary:#8b95a1;--text-heading:#e4e6eb;--border-color:#3a3f4b;--border-light:#3a3f4b;--border-medium:#404654;--accent-primary:#4da6d6;--accent-secondary:#3d8ab5;--accent-hover:#60b4e0;--accent-light:#2d4556;--code-bg:#2d3139;--code-text:#ff6b9d;--pre-bg:linear-gradient(to bottom, #2d3139 0%, #2d3139 100%);--pre-border:#3a3f4b;--table-hover:#2d4556;--table-stripe:#2d3139;--note-bg:linear-gradient(to right, #1e3a52 0%, #1e3a52 100%);--note-border:#4da6d6;--note-text:#66b3e0;--warning-bg:linear-gradient(to right, #3d3520 0%, #3d3520 100%);--warning-border:#ffb347;--warning-text:#ffc870;--shadow-sm:0 2px 4px rgba(0,0,0,0.3);--shadow-md:0 2px 8px rgba(0,0,0,0.4);--shadow-lg:0 2px 12px rgba(0,0,0,0.5)}:root{--content-max-width:1000px;--content-margin-horizontal:30px;--content-margin-vertical:15px;--container-border-radius:8px}*{transition:background-color .3s ease,color .3s ease,border-color .3s ease}body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,roboto,oxygen,ubuntu,cantarell,sans-serif;margin:0;padding:0;line-height:1.6;color:var(--text-primary);background-color:var(--bg-primary);font-size:15px}.doc-wrapper{display:flex;max-width:1600px;margin:0 auto;min-height:100vh}.sidebar{width:280px;background-color:var(--bg-secondary);border-right:1px solid var(--border-color);position:sticky;top:0;height:100vh;overflow-y:auto;overflow-x:hidden;flex-shrink:0}.sidebar::-webkit-scrollbar{width:8px}.sidebar::-webkit-scrollbar-track{background:var(--bg-tertiary)}.sidebar::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}.sidebar::-webkit-scrollbar-thumb:hover{background:var(--accent-primary)}.content-wrapper{flex:1;min-width:0;background-color:var(--bg-primary)}.container{max-width:var(--content-max-width);margin:var(--content-margin-vertical)var(--content-margin-horizontal);background-color:var(--bg-secondary);padding:30px;box-shadow:var(--shadow-lg);border-radius:var(--container-border-radius)}.sidebar-header{padding:20px;border-bottom:2px solid var(--border-light);background:linear-gradient(135deg,var(--accent-primary) 0%,var(--accent-secondary) 100%)}.sidebar-title{color:#fff;font-size:16px;font-weight:700;margin:0;text-align:center}.sidebar-nav{padding:15px 0}.nav-section{margin-bottom:8px}.nav-section-title{display:flex;align-items:center;justify-content:space-between;padding:10px 20px;color:var(--text-primary);font-weight:600;font-size:14px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease}.nav-section-title:hover{background-color:var(--bg-tertiary);border-left-color:var(--accent-primary);color:var(--accent-primary)}.nav-section-title .icon{font-size:16px;margin-right:8px}.nav-section-title .toggle-icon{font-size:12px;transition:transform .2s ease}.nav-section.expanded .toggle-icon{transform:rotate(90deg)}.nav-section-children{display:none;padding-left:15px}.nav-section.expanded>.nav-section-children{display:block}.nav-link{display:block;padding:8px 20px;padding-left:45px;color:var(--text-secondary);font-size:13px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-link:hover{background-color:var(--bg-tertiary);color:var(--accent-primary);border-left-color:var(--accent-light)}.nav-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.nav-subsection{margin-bottom:4px}.nav-subsection-title{display:flex;align-items:center;justify-content:space-between;padding:8px 20px;padding-left:35px;color:var(--text-primary);font-weight:600;font-size:13px;cursor:pointer;border-left:3px solid transparent;transition:all .2s ease;background-color:var(--bg-tertiary)}.nav-subsection-title:hover{background-color:var(--bg-primary);border-left-color:var(--accent-secondary);color:var(--accent-secondary)}.nav-subsection-title .icon{font-size:14px;margin-right:6px}.nav-subsection-title .toggle-icon{font-size:10px;transition:transform .2s ease}.nav-subsection.expanded .toggle-icon{transform:rotate(90deg)}.nav-subsection .nav-section-children{display:none;padding-left:10px}.nav-subsection.expanded>.nav-section-children{display:block}.nav-block-link{display:block;padding:6px 20px;padding-left:55px;color:var(--text-secondary);font-size:12px;text-decoration:none;border-left:3px solid transparent;transition:all .2s ease}.nav-block-link:hover{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-secondary)}.nav-block-link.active{background-color:var(--accent-light);color:var(--accent-primary);border-left-color:var(--accent-primary);font-weight:600}.mobile-nav-toggle{display:none;position:fixed;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;background:var(--accent-primary);color:#fff;border:none;font-size:24px;cursor:pointer;box-shadow:var(--shadow-lg);z-index:1000}.mobile-nav-toggle:hover{background:var(--accent-hover)}.theme-toggle{display:inline-flex;align-items:center;gap:6px;cursor:pointer;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:20px;padding:6px 12px;font-size:13px;color:var(--text-secondary);margin-left:16px;user-select:none}.theme-toggle:hover{background:var(--accent-light);border-color:var(--accent-primary);color:var(--accent-primary)}.theme-icon{font-size:16px}.page-header{display:flex;justify-content:space-between;align-items:center;padding:16px 0 12px;margin-bottom:20px;border-bottom:3px solid var(--border-light);position:relative}.page-header::after{content:'';position:absolute;bottom:-3px;left:0;width:120px;height:3px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}.page-header h1{margin:0;color:var(--text-heading);font-size:32px;font-weight:700;letter-spacing:-.5px}.page-header-right{display:flex;align-items:center}.microchip-logo{height:55px}.breadcrumbs{display:flex;align-items:center;font-size:13px;color:var(--text-secondary);margin-bottom:16px;padding:10px 14px;background:var(--bg-tertiary);border-radius:6px;border-left:3px solid var(--accent-primary)}.breadcrumbs a{color:var(--accent-primary);text-decoration:none;padding:4px 8px;border-radius:3px}.breadcrumbs a:hover{background-color:var(--accent-light);color:var(--accent-hover)}.breadcrumbs span{margin:0 8px;color:var(--text-tertiary)}h2{color:var(--text-heading);font-weight:600;font-size:22px;letter-spacing:-.5px;margin-top:32px;margin-bottom:12px;padding-bottom:6px;border-bottom:2px solid var(--border-light);position:relative}h2::before{content:'';position:absolute;bottom:-2px;left:0;width:60px;height:2px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary))}h3{color:var(--text-primary);font-weight:600;font-size:17px;margin-top:24px;margin-bottom:10px}h4{color:var(--text-primary);font-weight:500;font-size:15px;margin-top:18px;margin-bottom:8px}p{margin-bottom:12px;line-height:1.6;color:var(--text-primary)}table{border-collapse:separate;border-spacing:0;width:100%;margin:18px 0;border:1px solid var(--border-color);border-radius:6px;overflow:hidden;box-shadow:var(--shadow-md)}th{background:linear-gradient(to bottom,var(--accent-primary) 0%,var(--accent-secondary) 100%);color:#fff;padding:14px 16px;text-align:left;font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid var(--accent-secondary)}td{padding:12px 16px;border-bottom:1px solid var(--border-medium);vertical-align:top;color:var(--text-primary);background-color:var(--bg-secondary)}tr:last-child td{border-bottom:none}tr:nth-child(even) td{background-color:var(--table-stripe)}tbody tr:hover td{background-color:var(--table-hover)}code{background-color:var(--code-bg);padding:3px 6px;border-radius:3px;font-family:consolas,monaco,courier new,monospace;color:var(--code-text);font-size:14px}pre{background:var(--pre-bg);border:1px solid var(--pre-border);border-left:4px solid var(--accent-primary);border-radius:6px;padding:16px;margin:18px 0;box-shadow:var(--shadow-sm);overflow-x:auto;line-height:1.5}pre code{background-color:initial;padding:0;color:var(--text-primary);font-family:consolas,monaco,courier new,monospace;font-size:14px}.note{background:var(--note-bg);border-left:5px solid var(--note-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.note::before{content:'\2139\FE0F  Note';display:block;font-weight:600;color:var(--note-text);margin-bottom:6px;font-size:14px}.note p{color:var(--text-primary)}.warning{background:var(--warning-bg);border-left:5px solid var(--warning-border);border-radius:4px;padding:14px 16px;margin:18px 0;box-shadow:var(--shadow-md);position:relative}.warning::before{content:'\26A0\FE0F  Warning';display:block;font-weight:600;color:var(--warning-text);margin-bottom:6px;font-size:14px}.warning p{color:var(--text-primary)}ul,ol{margin:12px 0;padding-left:30px;line-height:1.6}li{margin:6px 0;color:var(--text-primary)}a{color:var(--accent-primary);text-decoration:none}a:hover{color:var(--accent-hover);text-decoration:underline}.nav-footer{margin-top:48px;padding:20px 0 12px;border-top:2px solid var(--border-light);font-size:11px;color:var(--text-tertiary);text-align:center}.nav-footer p{margin:0;font-size:11px}.block-icon-container{display:table;width:100%;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:8px;margin:24px 0;padding:20px;box-shadow:var(--shadow-md);table-layout:fixed}.block-icon-image{display:table-cell;width:220px;vertical-align:middle;padding-right:20px}.block-icon-image img{width:200px;height:auto;display:block}.block-icon-description{display:table-cell;vertical-align:middle;font-size:16px;line-height:1.7;color:var(--text-primary)}p img,.container>img{max-width:100%;height:auto;display:block;margin:20px auto;border:1px solid var(--border-light);border-radius:4px;box-shadow:var(--shadow-sm)}@media(max-width:768px){body{padding:10px 20px}.container{padding:20px}.page-header{flex-direction:column;align-items:flex-start;gap:16px}.microchip-logo{height:40px}.page-header h1{font-size:24px}h2{font-size:20px}h3{font-size:16px}}@media(max-width:1024px){.sidebar{position:fixed;left:-280px;top:0;height:100vh;z-index:999;transition:left .3s ease;box-shadow:2px 0 8px rgba(0,0,0,.15)}.sidebar.mobile-visible{left:0}.mobile-nav-toggle{display:flex;align-items:center;justify-content:center}.content-wrapper{width:100%}.container{margin:10px 15px;padding:20px}.sidebar.mobile-visible::after{content:'';position:fixed;top:0;left:280px;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:-1}}@media(max-width:768px){.container{margin:10px;padding:15px}.page-header h1{font-size:22px}.breadcrumbs{font-size:12px;padding:8px 12px}.nav-section-title{font-size:13px;padding:8px 15px}.nav-link{font-size:12px;padding:6px 15px;padding-left:35px}}.under-construction-banner{background:linear-gradient(135deg,#ff9800 0%,#f57c00 100%);color:#fff;padding:12px 20px;text-align:center;font-size:14px;font-weight:600;border-bottom:3px solid #e65100;box-shadow:0 2px 8px rgba(0,0,0,.15);margin-bottom:20px}.under-construction-banner .icon{font-size:18px;margin-right:8px}.under-construction-banner strong{color:#fff;text-transform:uppercase;letter-spacing:.5px}</style><script type=application/ld+json>{"@context":"https://schema.org","@type":"TechArticle","name":"CAN Communication Blocks","description":"Microchip Blockset for MATLAB\/Simulink - Embedded Code Generation for dsPIC, PIC32, and SAM Microcontrollers","url":"https://mplab-blockset.github.io/MPLAB-Device-Blocks-for-Simulink\/block_reference\/can.html","author":{"@type":"Organization","name":"Microchip Technology Inc."},"datePublished":"2025-10-16","dateModified":"2025-10-16","inLanguage":"en-US"}</script></head><body><div class=doc-wrapper><nav class=sidebar><div class=sidebar-header><h2 class=sidebar-title>MPLAB Blockset</h2></div><div class=sidebar-nav><div class=nav-section><a href=../ class=nav-section-title style="display:block;border-left:3px solid transparent"><span><span class=icon>ğŸ </span>Home</span></a></div><div class=nav-section id=section-getting-started><div class=nav-section-title onclick='toggleSection("getting-started")'><span><span class=icon>ğŸš€</span>Getting Started</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><a href=../getting_started/overview.html class=nav-link>Overview</a>
<a href=../getting_started/installation.html class=nav-link>Installation</a>
<a href=../getting_started/quick_start.html class=nav-link>Quick Start Guide</a>
<a href=../getting_started/board_templates.html class=nav-link>Board Templates</a>
<a href=../getting_started/motor_control_examples.html class=nav-link>Motor Control Examples</a>
<a href=../getting_started/scheduler_multitasking.html class=nav-link>Scheduler & Multitasking</a>
<a href=../getting_started/external_mode_pil.html class=nav-link>External Mode & PIL</a>
<a href=../getting_started/data_visualization.html class=nav-link>Data Visualization</a>
<a href=../getting_started/supported_devices.html class=nav-link>Supported Devices</a></div></div><div class=nav-section id=section-user-guide><div class=nav-section-title onclick='toggleSection("user-guide")'><span><span class=icon>ğŸ“š</span>User Guide</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><a href=../user_guide/code_generation.html class=nav-link>Code Generation</a>
<a href=../user_guide/compiler_setup.html class=nav-link>Compiler Setup</a>
<a href=../user_guide/external_mode.html class=nav-link>External Mode</a>
<a href=../user_guide/pil_testing.html class=nav-link>PIL Testing</a></div></div><div class=nav-section id=section-block-reference><div class=nav-section-title onclick='toggleSection("block-reference")'><span><span class=icon>ğŸ§©</span>Block Reference</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><div class=nav-subsection id=section-pwm-timers><div class=nav-subsection-title onclick='toggleSection("pwm-timers")'><span><span class=icon>âš¡</span>PWM & Timers</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><a href=../block_reference/pwm_io/pwm.html class=nav-block-link>PWM</a>
<a href=../block_reference/pwm_io/pwm_highspeed.html class=nav-block-link>PWM High-Speed</a>
<a href=../block_reference/pwm_io/pwm_hs_fep.html class=nav-block-link>PWM HS FEP</a>
<a href=../block_reference/pwm_io/pwm_highspeed_override.html class=nav-block-link>PWM HS Override</a>
<a href=../block_reference/pwm_io/mcpwm.html class=nav-block-link>MCPWM (PIC32)</a>
<a href=../block_reference/pwm_io/pwm_sam7x.html class=nav-block-link>PWM SAM7x</a>
<a href=../block_reference/pwm_io/pwm_sam7x_override.html class=nav-block-link>PWM SAM7x Override</a>
<a href=../block_reference/pwm_io/tcc_pwm.html class=nav-block-link>TCC PWM (SAM)</a></div></div><div class=nav-subsection id=section-timers><div class=nav-subsection-title onclick='toggleSection("timers")'><span><span class=icon>â±ï¸</span>Timers</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><a href=../block_reference/timers/timer_config.html class=nav-block-link>Timer Config</a>
<a href=../block_reference/timers/input_capture.html class=nav-block-link>Input Capture</a>
<a href=../block_reference/timers/output_compare_hw.html class=nav-block-link>Output Compare (HW)</a>
<a href=../block_reference/timers/output_compare_sw.html class=nav-block-link>Output Compare (SW)</a>
<a href=../block_reference/timers/timer_pil_profiling.html class=nav-block-link>PIL Profiling Timer</a></div></div><div class=nav-subsection id=section-adc><div class=nav-subsection-title onclick='toggleSection("adc")'><span><span class=icon>ğŸ“Š</span>ADC</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><a href=../block_reference/adc/adc.html class=nav-block-link>ADC (dsPIC)</a>
<a href=../block_reference/adc/adc_hs_12b.html class=nav-block-link>ADC HS 12-bit</a>
<a href=../block_reference/adc/adc_highspeed_sar.html class=nav-block-link>ADC High-Speed SAR</a>
<a href=../block_reference/adc/adc_highspeed_sar_dspic.html class=nav-block-link>ADC HS SAR (dsPIC)</a>
<a href=../block_reference/adc/adc_same5x.html class=nav-block-link>ADC (SAM E5x)</a>
<a href=../block_reference/adc/adc_samrh707x.html class=nav-block-link>ADC (SAMRH707x)</a>
<a href=../block_reference/adc/afec_sam7x.html class=nav-block-link>AFEC (SAM7x)</a></div></div><div class=nav-subsection id=section-communication><div class=nav-subsection-title onclick='toggleSection("communication")'><span><span class=icon>ğŸ“¡</span>Communication</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><div class=nav-subsection id=section-uart><div class=nav-subsection-title onclick='toggleSection("uart")'><span><span class=icon></span>UART</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><a href=../block_reference/communication/uart/uart_config.html class=nav-block-link>UART Config</a>
<a href=../block_reference/communication/uart/uart_tx.html class=nav-block-link>UART Tx</a>
<a href=../block_reference/communication/uart/uart_rx.html class=nav-block-link>UART Rx</a>
<a href=../block_reference/communication/uart/uart_txmatlab.html class=nav-block-link>UART Tx MATLAB</a>
<a href=../block_reference/communication/uart/uart_break_and_autobaud.html class=nav-block-link>UART Break & Autobaud</a></div></div><div class=nav-subsection id=section-can><div class=nav-subsection-title onclick='toggleSection("can")'><span><span class=icon></span>CAN</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><a href=../block_reference/communication/can/can_config.html class=nav-block-link>CAN Config</a>
<a href=../block_reference/communication/can/can_tx.html class=nav-block-link>CAN Tx</a>
<a href=../block_reference/communication/can/can_rx.html class=nav-block-link>CAN Rx</a></div></div><a href=../block_reference/communication/i2c.html class=nav-block-link>I2C Master/Slave</a>
<a href=../block_reference/communication/spi.html class=nav-block-link>SPI Master/Slave</a></div></div><div class=nav-subsection id=section-digital-io><div class=nav-subsection-title onclick='toggleSection("digital-io")'><span><span class=icon>ğŸ”Œ</span>Digital I/O</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><a href=../block_reference/digital_io/digital_input.html class=nav-block-link>Digital Input</a>
<a href=../block_reference/digital_io/digital_output.html class=nav-block-link>Digital Output</a>
<a href=../block_reference/digital_io/digital_output_read.html class=nav-block-link>Digital Output Read</a>
<a href=../block_reference/digital_io/digital_output_write.html class=nav-block-link>Digital Output Write</a></div></div><div class=nav-subsection id=section-encoders><div class=nav-subsection-title onclick='toggleSection("encoders")'><span><span class=icon>ğŸ”„</span>Encoders</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><a href=../block_reference/encoders_counters/qei.html class=nav-block-link>QEI (Quadrature Encoder)</a>
<a href=../block_reference/encoders_counters/pdec.html class=nav-block-link>PDEC (SAM)</a>
<a href=../block_reference/encoders_counters/qdec_samx.html class=nav-block-link>QDEC (SAM)</a>
<a href=../block_reference/encoders_counters/change_notification.html class=nav-block-link>Change Notification</a></div></div><div class=nav-subsection id=section-analog-io><div class=nav-subsection-title onclick='toggleSection("analog-io")'><span><span class=icon>ğŸ“‰</span>Analog I/O</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><a href=../block_reference/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator.html class=nav-block-link>High-Speed Comparator</a>
<a href=../block_reference/analog_io/comparator_opamps_volt_ref/highspeed_analogcomparator_wslope.html class=nav-block-link>Comparator w/ Slope</a>
<a href=../block_reference/analog_io/comparator_opamps_volt_ref/op_amp.html class=nav-block-link>Op-Amp</a>
<a href=../block_reference/analog_io/comparator_opamps_volt_ref/pga.html class=nav-block-link>PGA (Programmable Gain Amp)</a>
<a href=../block_reference/analog_io/dac_samx.html class=nav-block-link>DAC (SAM)</a></div></div><div class=nav-subsection id=section-system-config><div class=nav-subsection-title onclick='toggleSection("system-config")'><span><span class=icon>âš™ï¸</span>System Config</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><a href=../block_reference/system_configuration/master.html class=nav-block-link>Master</a>
<a href=../block_reference/system_configuration/interrupt.html class=nav-block-link>Interrupt</a>
<a href=../block_reference/system_configuration/compiler_options.html class=nav-block-link>Compiler Options</a>
<a href=../block_reference/system_configuration/scheduler_options.html class=nav-block-link>Scheduler Options</a>
<a href=../block_reference/system_configuration/idle_task.html class=nav-block-link>Idle Task</a>
<a href=../block_reference/system_configuration/mcu_load.html class=nav-block-link>MCU Load</a>
<a href=../block_reference/system_configuration/mcu_overload.html class=nav-block-link>MCU Overload</a>
<a href=../block_reference/system_configuration/tasks_state.html class=nav-block-link>Tasks State</a>
<a href=../block_reference/system_configuration/secondary_core.html class=nav-block-link>Secondary Core</a></div></div><div class=nav-subsection id=section-utility><div class=nav-subsection-title onclick='toggleSection("utility")'><span><span class=icon>ğŸ”§</span>Utility Blocks</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><a href=../block_reference/user_functions/c_function_call.html class=nav-block-link>C Function Call</a>
<a href=../block_reference/utility/doc.html class=nav-block-link>Documentation Block</a>
<a href=../block_reference/utility/msi.html class=nav-block-link>MSI (Model Sample Info)</a>
<a href=../block_reference/utility/port_info.html class=nav-block-link>Port Info</a>
<a href=../block_reference/utility/timer_info.html class=nav-block-link>Timer Info</a>
<a href=../block_reference/utility/simulink_reset_config.html class=nav-block-link>Simulink Reset Config</a></div></div></div></div><div class=nav-section id=section-examples><div class=nav-section-title onclick='toggleSection("examples")'><span><span class=icon>ğŸ“–</span>Examples</span>
<span class=toggle-icon>â–¶</span></div><div class=nav-section-children><a href=../examples/field_weakening.html class=nav-link>Field Weakening</a></div></div><div class=nav-section id=section-github><a href=https://github.com/microchip-technology/mplab-blockset class=nav-section-title style="display:block;border-left:3px solid transparent"><span><span class=icon>ğŸ’»</span>GitHub</span></a></div></div></nav><div class=content-wrapper><div class=container><div class=breadcrumbs><a href=../>Home</a>
<span>></span>
<a href=../block_reference/index.html>Block Reference</a>
<span>></span>
<span>CAN Communication Blocks</span></div><div class=under-construction-banner><span class=icon>âš ï¸</span>
<strong>Documentation Under Construction</strong> â€”
This documentation is currently being developed. All information has not been validated by Microchip yet.</div><div class=page-header><h1>CAN Communication Blocks</h1><div class=page-header-right><img src=../images/microchip-logo.png alt="Microchip Logo" class=microchip-logo>
<button class=theme-toggle onclick=toggleTheme() aria-label="Toggle dark mode">
<span class=theme-icon id=theme-icon>â˜€ï¸</span>
<span id=theme-text>Light</span></button></div></div><h2 id=overview>Overview</h2><p>The <strong>CAN (Controller Area Network)</strong> block family enables robust, multi-master communication on CAN bus networks. CAN is widely used in automotive, industrial automation, and embedded systems for reliable data exchange in electrically noisy environments.</p><p>The MCHP Blockset provides three blocks for CAN communication: <strong>CAN Config</strong> for peripheral setup, <strong>CAN Tx</strong> for message transmission, and <strong>CAN Rx</strong> for message reception with flexible filtering. These blocks support both CAN 2.0 (standard) and CAN-FD (flexible data-rate) protocols.</p><h2 id=can-protocol-features>CAN Protocol Features</h2><ul><li><strong>Multi-master architecture:</strong> Any node can initiate communication</li><li><strong>Message prioritization:</strong> Lower IDs have higher priority (automatic arbitration)</li><li><strong>Error detection:</strong> CRC, ACK, frame check, bit monitoring, bit stuffing</li><li><strong>Fault confinement:</strong> Automatic bus-off recovery and error counting</li><li><strong>Deterministic:</strong> Guaranteed message latency based on priority</li><li><strong>Flexible data rates:</strong> CAN 2.0 up to 1 Mbps, CAN-FD up to 8 Mbps (data phase)</li></ul><h2 id=available-blocks>Available Blocks</h2><h3 id=can-config>CAN Config</h3><p>Configures the CAN peripheral including bit timing (baud rate), message buffer allocation, and pin assignments. This block is <strong>required</strong> before using CAN Tx or CAN Rx blocks.</p><p><strong>Key Parameters:</strong></p><ul><li>Baud rate (50 kbps to 1 Mbps)</li><li>Bit timing (auto-calculated)</li><li>CAN-FD support (SAM devices)</li><li>Buffer allocation (auto-configured)
[View Documentation â†’]</li></ul><h3 id=can-tx>CAN Tx</h3><p>Transmits CAN messages on the bus with configurable ID, data length, and priority. Supports standard (11-bit) and extended (29-bit) identifiers, RTR frames, and both FIFO and buffer modes.</p><p><strong>Key Parameters:</strong></p><ul><li>Message ID (standard/extended)</li><li>Data size (0-8 bytes CAN, 0-64 bytes CAN-FD)</li><li>Transmission mode (FIFO/buffer)</li><li>RTR support
[View Documentation â†’]</li></ul><h3 id=can-rx>CAN Rx</h3><p>Receives CAN messages with flexible filtering options. Supports exact match, range, and mask-based filters for both standard and extended IDs. Configurable storage in FIFOs or dedicated buffers.</p><p><strong>Key Parameters:</strong></p><ul><li>Filter type (classic/dual/range)</li><li>Message ID and mask</li><li>Buffer mode (FIFO/dedicated)</li><li>Data size configuration
[View Documentation â†’]</li></ul><h2 id=block-selection-guide>Block Selection Guide</h2><h3 id=when-to-use-each-block>When to Use Each Block</h3><table><thead><tr><th>Task</th><th>Block to Use</th><th>Configuration Notes</th></tr></thead><tbody><tr><td>Initialize CAN peripheral</td><td>CAN Config</td><td>Required first step - one per CAN module</td></tr><tr><td>Send periodic sensor data</td><td>CAN Tx</td><td>(FIFO mode)</td></tr><tr><td>Send critical command</td><td>CAN Tx</td><td>(buffer mode)</td></tr><tr><td>Receive specific message</td><td>CAN Rx</td><td>(exact filter)</td></tr><tr><td>Receive message group</td><td>CAN Rx</td><td>(range filter)</td></tr><tr><td>Receive broadcast</td><td>CAN Rx</td><td>(mask filter)</td></tr></tbody></table><h2 id=device-family-support>Device Family Support</h2><table><thead><tr><th>Device Family</th><th>CAN Type</th><th>Max Modules</th><th>CAN-FD</th><th>Max Baud Rate</th><th>Status</th></tr></thead><tbody><tr><td>SAM E70/S70/V70/V71</td><td>MCAN (Bosch M_CAN)</td><td>2</td><td>âœ“ Yes</td><td>1 Mbps (nominal), 8 Mbps (data)</td><td>Supported</td></tr><tr><td>SAM E5x (E51/E53/E54)</td><td>CAN</td><td>2</td><td>âœ“ Yes</td><td>1 Mbps (nominal), 5 Mbps (data)</td><td>Supported</td></tr><tr><td>SAM C20/C21</td><td>CAN</td><td>2</td><td>âœ“ Yes</td><td>1 Mbps (nominal), 5 Mbps (data)</td><td>Supported</td></tr><tr><td>SAM D51</td><td>CAN</td><td>2</td><td>âœ“ Yes</td><td>1 Mbps (nominal), 5 Mbps (data)</td><td>Supported</td></tr><tr><td>dsPIC30F/33F</td><td>ECAN</td><td>1-2</td><td>âœ— No</td><td>1 Mbps</td><td>Future</td></tr><tr><td>dsPIC33E/PIC24E</td><td>ECAN</td><td>1-2</td><td>âœ— No</td><td>1 Mbps</td><td>Future</td></tr><tr><td>dsPIC33C/CH/CK</td><td>CAN-FD (select models)</td><td>1-2</td><td>Device-dependent</td><td>1-5 Mbps</td><td>Future</td></tr><tr><td>PIC32MX/MZ</td><td>CAN</td><td>1-2</td><td>âœ— No</td><td>1 Mbps</td><td>Future</td></tr></tbody></table><h2 id=typical-can-network-example>Typical CAN Network Example</h2><pre tabindex=0><code>CAN Network Topology (250 kbps):

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Master ECU â”‚         â”‚ Motor Node  â”‚         â”‚ Sensor Node â”‚
â”‚             â”‚         â”‚             â”‚         â”‚             â”‚
â”‚ CAN Config  â”‚         â”‚ CAN Config  â”‚         â”‚ CAN Config  â”‚
â”‚ CAN Tx      â”‚         â”‚ CAN Rx      â”‚         â”‚ CAN Tx      â”‚
â”‚ CAN Rx      â”‚         â”‚ CAN Tx      â”‚         â”‚ CAN Rx      â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                       â”‚                       â”‚
    â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€
      CAN_H â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      CAN_L â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â”‚                                                 â”‚
    [120Î©]                                           [120Î©]
    Termination                                   Termination

Message Flow:
  Master â†’ All:    ID 0x000 (broadcast commands)
  Master â†’ Motor:  ID 0x100 (speed setpoint)
  Motor â†’ Master:  ID 0x200 (status feedback)
  Sensor â†’ All:    ID 0x300 (sensor data)

Priority Order (Lower ID = Higher Priority):
  0x000: Highest (emergency broadcast)
  0x100: High (motor control)
  0x200: Medium (status)
  0x300: Lower (sensor data)
</code></pre><h2 id=can-vs-can-fd-comparison>CAN vs CAN-FD Comparison</h2><table><thead><tr><th>Feature</th><th>CAN 2.0</th><th>CAN-FD</th></tr></thead><tbody><tr><td>Maximum Data Bytes</td><td>8 bytes</td><td>64 bytes</td></tr><tr><td>Bit Rate</td><td>Up to 1 Mbps (fixed)</td><td>Up to 1 Mbps (arbitration), up to 8 Mbps (data)</td></tr><tr><td>Protocol Overhead</td><td>~47 bits (8 bytes data)</td><td>~64 bits (64 bytes data)</td></tr><tr><td>Throughput (1 Mbps)</td><td>~8 kB/sec</td><td>~40 kB/sec (at 5 Mbps data phase)</td></tr><tr><td>Error Detection</td><td>15-bit CRC</td><td>17/21-bit CRC (enhanced)</td></tr><tr><td>Compatibility</td><td>Universal</td><td>Backward compatible during arbitration</td></tr><tr><td>Use Cases</td><td>General control, periodic data</td><td>Firmware updates, diagnostics, high-speed logging</td></tr></tbody></table><h2 id=getting-started>Getting Started</h2><h3 id=quick-setup-3-steps>Quick Setup (3 Steps)</h3><ul><li><p><strong>Add CAN Config Block</strong></p></li><li><p>Drag from MCHP Blockset â†’ BUS CAN â†’ CAN_Config</p></li><li><p>Select CAN module (CAN0/CAN1/MCAN0/MCAN1)</p></li><li><p>Choose baud rate (e.g., 250000 for 250 kbps)</p></li><li><p>Assign RX/TX pins</p></li><li><p><strong>Add CAN Tx Block (Optional)</strong></p></li><li><p>Drag from MCHP Blockset â†’ BUS CAN â†’ CAN_Tx</p></li><li><p>Set message ID (e.g., 0x100)</p></li><li><p>Configure data size (e.g., 8 bytes)</p></li><li><p>Connect MsgLen and Tx data inputs</p></li><li><p><strong>Add CAN Rx Block (Optional)</strong></p></li><li><p>Drag from MCHP Blockset â†’ BUS CAN â†’ CAN_Rx</p></li><li><p>Set message ID and filter (e.g., 0x200, mask 0x7FF)</p></li><li><p>Configure data size (e.g., 8 bytes)</p></li><li><p>Use MsgID, MsgLen, and Rx data outputs</p></li></ul><p><strong>Best Practice:</strong> Start with a simple loopback test (one Tx, one Rx, same ID) to verify CAN peripheral configuration before building complex networks.</p><h2 id=common-use-cases>Common Use Cases</h2><h3 id=1-motor-control-network>1. Motor Control Network</h3><p><strong>Application:</strong> Distributed motor control with central controller</p><ul><li>Master sends speed commands (ID 0x100-0x10F, one per motor)</li><li>Motors respond with status (ID 0x200-0x20F)</li><li>Emergency stop broadcast (ID 0x000)</li><li>Baud rate: 500 kbps, update rate: 100 Hz</li></ul><h3 id=2-sensor-data-acquisition>2. Sensor Data Acquisition</h3><p><strong>Application:</strong> Multiple sensors reporting to data logger</p><ul><li>Each sensor transmits with unique ID (0x300-0x3FF)</li><li>Logger uses range filter (0x300-0x3FF) to receive all</li><li>Timestamp included in message payload</li><li>Baud rate: 250 kbps, periodic transmission (10-50 Hz)</li></ul><h3 id=3-firmware-updates-can-fd>3. Firmware Updates (CAN-FD)</h3><p><strong>Application:</strong> Over-the-air firmware update via CAN-FD</p><ul><li>Update packets with 64-byte payload (ID 0x500)</li><li>Acknowledgment messages (ID 0x501)</li><li>Data phase at 2-5 Mbps for fast transfer</li><li>CRC verification and retry mechanism</li></ul><h2 id=troubleshooting-guide>Troubleshooting Guide</h2><table><thead><tr><th>Problem</th><th>Possible Cause</th><th>Solution</th></tr></thead><tbody><tr><td>No communication</td><td>Missing CAN Config block</td><td>Add CAN Config block, verify CAN module matches</td></tr><tr><td>Baud rate errors</td><td>Incorrect bit timing</td><td>Use standard baud rates, verify clock frequency</td></tr><tr><td>Messages not received</td><td>Filter misconfigured</td><td>Start with exact match (mask=0x7FF), test with analyzer</td></tr><tr><td>Bus-off state</td><td>Missing termination or noise</td><td>Check 120Î© resistors at both ends, inspect cabling</td></tr><tr><td>Data corruption</td><td>Cache coherency (ARM)</td><td>Use non-cached memory or cache maintenance functions</td></tr></tbody></table><h2 id=related-documentation>Related Documentation</h2><ul><li>[UART Communication Blocks] - Serial communication alternative</li><li>[SPI Communication Blocks] - High-speed synchronous communication</li><li>[I2C Communication Blocks] - Multi-device bus communication</li><li>[Digital I/O Blocks] - CAN transceiver control</li></ul><h2 id=references>References</h2><ul><li>ISO 11898-1:2015 - Road vehicles â€” Controller area network (CAN)</li><li>Bosch CAN FD Specification Version 1.0</li><li>[SAM E70/S70/V70/V71 Family Datasheet (DS60001527)] - MCAN Peripheral</li><li>[SAM E5x/D5x Family Datasheet (DS60001507)] - CAN Peripheral</li><li>Application Note: CAN Network Design and Best Practices (search [Microchip Portal])</li><li>Application Note: CAN-FD Migration Guide (search [Microchip Portal])</li></ul><h2 id=see-also>See Also</h2><h3 id=datasheets>Datasheets</h3><ul><li><a href=https://www.microchip.com/DS60001527>SAM E70/S70/V70/V71 Family Datasheet (DS60001527)</a></li><li><a href=https://www.microchip.com/DS60001507>SAM E5x/D5x Family Datasheet (DS60001507)</a></li></ul><h3 id=other>Other</h3><ul><li><a href=https://www.microchip.com/en-us/search>Microchip Portal</a></li><li><a href=https://www.microchip.com/en-us/search>Microchip Portal</a></li></ul><div class=nav-footer><p>Last updated: January 2025 | MPLAB Blockset Documentation</p><p>&copy; 2025 Microchip Technology Inc. All rights reserved.</p></div></div></div><button class=mobile-nav-toggle onclick=toggleMobileSidebar() aria-label="Toggle navigation">
â˜°</button></div><script>function toggleTheme(){const t=document.documentElement,n=t.getAttribute("data-theme"),e=n==="dark"?"light":"dark";t.setAttribute("data-theme",e),localStorage.setItem("theme",e),updateThemeButton(e)}function updateThemeButton(e){const t=document.getElementById("theme-icon"),n=document.getElementById("theme-text");e==="dark"?(t.textContent="ğŸŒ™",n.textContent="Dark"):(t.textContent="â˜€ï¸",n.textContent="Light")}(function(){const n=localStorage.getItem("theme"),s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=n||(s?"dark":"light");document.documentElement.setAttribute("data-theme",t),updateThemeButton(t)})(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{if(!localStorage.getItem("theme")){const t=e.matches?"dark":"light";document.documentElement.setAttribute("data-theme",t),updateThemeButton(t)}}),window.toggleSection=function(e){const t=document.getElementById("section-"+e);if(t&&(t.classList.toggle("expanded"),t.classList.contains("nav-section"))){const n=getExpandedSections();t.classList.contains("expanded")?n.add(e):n.delete(e),localStorage.setItem("expandedSections",JSON.stringify([...n]))}};function getExpandedSections(){const e=localStorage.getItem("expandedSections");return new Set(e?JSON.parse(e):[])}function restoreExpandedSections(){const e=getExpandedSections();e.forEach(e=>{const t=document.getElementById("section-"+e);t&&t.classList.add("expanded")})}function highlightActivePage(){const e=window.location.pathname,t=document.querySelectorAll(".nav-link, .nav-block-link, .nav-section-title[href], .nav-subsection-title[href]");t.forEach(t=>{const n=new URL(t.href,window.location.origin).pathname;if(n===e){t.classList.add("active");const n=t.closest(".nav-subsection");n&&!n.classList.contains("expanded")&&n.classList.add("expanded");const e=t.closest(".nav-section");if(e&&!e.classList.contains("expanded")){e.classList.add("expanded");const n=e.id.replace("section-",""),t=getExpandedSections();t.add(n),localStorage.setItem("expandedSections",JSON.stringify([...t]))}}})}window.toggleMobileSidebar=function(){const e=document.querySelector(".sidebar");e&&e.classList.toggle("mobile-visible")},function(){restoreExpandedSections(),highlightActivePage();const t=document.querySelector(".nav-link.active");if(t){const e=t.closest(".nav-section");if(e&&e.id){const n=e.id.replace("section-",""),t=getExpandedSections();t.has(n)||(t.add(n),localStorage.setItem("expandedSections",JSON.stringify([...t])))}}}()</script></body></html>